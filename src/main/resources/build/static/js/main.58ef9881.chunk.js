(this["webpackJsonpsea-mates-web"]=this["webpackJsonpsea-mates-web"]||[]).push([[0],{205:function(e,t,a){},319:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(0),i=a.n(r),c=a(21),s=a.n(c),o=(a(205),a(19)),l=a(5),u=a(8),d=a(6),j=a(375),b=a(67),m=a(387),h=a(171),O=a.n(h),p=a(388),f=a(322),g=a(410),x=a(177),v=a(390),y=a(372),S=a(370),w=a(321),k=a(378),C=a(371),I=a(389),D=a(391),E=a(392),N=a(393),T=a(394),q=a(176),P=a(163),W=a(164),U=a(369),z=a(376),A=a(377),B=a(29),M=a(363),R=a(367),L=a(368),F=a(373),G=a(374),H=a(25);function J(e){var t=e.open,a=e.onClose,i=e.date,c=new Date(i),s=Object(H.g)(),o=Object(r.useState)([]),l=Object(u.a)(o,2),d=l[0],j=l[1],m=Object(r.useState)(!1),h=Object(u.a)(m,2),O=h[0],p=h[1];return Object(r.useEffect)((function(){return fetch("/api/calendar/available?date="+c.toISOString().substr(0,10),{method:"GET",headers:{Authorization:sessionStorage.getItem("token")}}).then((function(e){return e.ok?e.json():403===e.status?(s.push("/login"),new Error("User not logged")):(j([]),new Error("Error fetching friends: "+e.status))})).then((function(e){void 0===e._embedded?j([]):j(e._embedded.appUserList)}),(function(e){j([])})),function(){return p(!0)}}),[O]),Object(n.jsxs)(M.a,{open:t,maxWidth:"xs",fullWidth:!0,children:[Object(n.jsx)(R.a,{children:"Dia ".concat(c.toLocaleDateString())}),Object(n.jsx)(L.a,{dividers:!0,children:Object(n.jsxs)(U.a,{container:!0,direction:"column",spacing:3,children:[Object(n.jsx)(U.a,{item:!0,children:Object(n.jsx)(b.a,{variant:"subtitle1",children:"Amigos em terra"})}),Object(n.jsx)(U.a,{item:!0,children:0===d.length?Object(n.jsx)(b.a,{variant:"h6",children:"Nenhum amigo dispon\xedvel"}):Object(n.jsx)(S.a,{disablePadding:!0,children:d.map((function(e){return Object(n.jsx)(w.a,{dense:!0,children:Object(n.jsx)(C.a,{primary:e.userInfo.name})},e)}))})}),Object(n.jsx)(U.a,{item:!0,children:Object(n.jsx)(y.a,{})}),Object(n.jsx)(U.a,{item:!0,children:Object(n.jsx)(b.a,{variant:"subtitle1",children:"Eventos"})}),Object(n.jsx)(U.a,{item:!0,container:!0,xs:!0,justify:"center",alignItems:"center",children:Object(n.jsx)(b.a,{variant:"body1",children:"-"})})]})}),Object(n.jsx)(F.a,{children:Object(n.jsx)(G.a,{color:"primary",onClick:a,children:"Fechar"})})]})}var V=Object(j.a)((function(e){return{fab:{position:"fixed",right:"20px",bottom:"20px",zIndex:100}}}));function _(e){var t=V(),a=Object(r.useState)(!1),i=Object(u.a)(a,2),c=i[0],s=i[1],o=Object(r.useState)((new Date).toISOString()),l=Object(u.a)(o,2),d=l[0],j=l[1];Object(r.useEffect)((function(){e.changeTitle("Calend\xe1rio")}),[]);return Object(n.jsxs)(U.a,{container:!0,spacing:3,children:[Object(n.jsx)(U.a,{item:!0,children:Object(n.jsx)(q.a,{plugins:[P.a,W.a],initialView:"dayGridMonth",selectable:!0,height:"auto",contentHeight:"auto",locale:"pt-br",events:function(e){return e.shifts.map((function(e){return[{id:e.shiftId,title:"Pr\xe9-embarque",start:e.unavailabilityStartDate,end:e.boardingDate,display:"block",backgroundColor:"rgb(255,92,0)",allDay:"true",extendedProps:{group:e.shiftId}},{id:"board"+e.shiftId,title:"A bordo",start:e.boardingDate,end:e.leavingDate,display:"block",backgroundColor:"rgb(170,0,0)",allDay:"true",extendedProps:{group:e.shiftId}},{id:"available"+e.shiftId,title:"P\xf3s-embarque",start:e.leavingDate,end:e.unavailabilityEndDate,display:"block",backgroundColor:"rgb(0,185,185)",allDay:"true",extendedProps:{group:e.shiftId}}]})).flat()}(e),dateClick:function(e){j(e.dateStr),s(!0)}})}),Object(n.jsxs)(z.a,{className:t.fab,variant:"extended",color:"primary","aria-label":"add",component:B.b,to:"/shift",children:[Object(n.jsx)(A.a,{}),"Escala"]}),Object(n.jsx)(J,{open:c,onClose:function(){s(!1)},date:d})]})}var K=a(32),$=a(405);function Z(e){return Object(n.jsx)($.a,Object(o.a)({elevation:6,variant:"filled"},e))}var Q=a(406),X=a(379),Y=a(407),ee=a(380),te=a(381);function ae(e){var t=Object(H.g)(),a=i.a.useState([0]),c=Object(u.a)(a,2),s=c[0],o=c[1],l=Object(r.useState)(!1),d=Object(u.a)(l,2),j=d[0],m=d[1],h=Object(r.useState)(!1),O=Object(u.a)(h,2),p=O[0],f=O[1],g=Object(r.useState)("Sucesso!"),x=Object(u.a)(g,2),v=x[0],y=x[1],I=Object(r.useState)(""),D=Object(u.a)(I,2),E=D[0],N=D[1];Object(r.useEffect)((function(){e.changeTitle("Escalas")}),[]);var T=function(e){return function(){var t=s.indexOf(e.shiftId),a=Object(K.a)(s);-1===t?a.push(e.shiftId):a.splice(t,1),o(a)}};return Object(n.jsxs)(U.a,{container:!0,direction:"column",alignItems:"stretch",children:[Object(n.jsx)(U.a,{container:!0,justify:"center",children:Object(n.jsx)(S.a,{children:null===e.shifts?[]:e.shifts.map((function(e){return Object(n.jsxs)(w.a,{button:!0,onClick:T(e),children:[Object(n.jsx)(k.a,{children:Object(n.jsx)(Q.a,{edge:"start",checked:-1!==s.indexOf(e.shiftId),tabIndex:-1,disableRipple:!0})}),Object(n.jsx)(X.a,{children:Object(n.jsx)(b.a,{variant:"h6",children:e.shiftId})}),Object(n.jsx)(C.a,{primary:"de ".concat(e.unavailabilityStartDate," at\xe9 ").concat(e.unavailabilityEndDate)})]},e)}))})}),Object(n.jsxs)(U.a,{container:!0,justify:"flex-end",children:[Object(n.jsx)(z.a,{color:"primary","aria-label":"add",component:B.b,to:"/shift",children:Object(n.jsx)(A.a,{})}),Object(n.jsx)(z.a,{color:"default",disabled:!0,"aria-label":"edit",children:Object(n.jsx)(ee.a,{})}),Object(n.jsx)(z.a,{color:"secondary","aria-label":"delete",onClick:function(a){if(a.preventDefault(),1===s.length)return f(!1),N("Nenhuma escala selecionada!"),void m(!0);s.forEach((function(e){0!==e&&fetch("/api/shift/remove?id="+e,{method:"DELETE",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:sessionStorage.getItem("token")}}).then((function(e){switch(e.status){case 204:f(!0),y("Escala(s) deletada(s)!"),m(!0),setTimeout((function(){t.push("/home/shifts")}),2e3);break;case 403:throw t.push("/login"),new Error("Usu\xe1rio n\xe3o logado!");case 404:throw new Error("Escala n\xe3o encontrada no servidor!");default:throw new Error("Unexpected server response: "+e.status)}})).catch((function(e){f(!1),N(e.message),m(!0)}))})),e.fetchShifts()},children:Object(n.jsx)(te.a,{})})]}),Object(n.jsx)(U.a,{children:Object(n.jsx)(Y.a,{open:j,autoHideDuration:5e3,onClose:function(){return m(!1)},children:p?Object(n.jsx)(Z,{severity:"success",children:v}):Object(n.jsx)(Z,{severity:"error",children:E})})})]})}var ne=a(14),re=a(408),ie=a(385),ce=a(382),se=a(383);function oe(e){var t=e.onClose,a=e.open,i=Object(r.useState)(""),c=Object(u.a)(i,2),s=c[0],o=c[1];return Object(n.jsx)(U.a,{container:!0,children:Object(n.jsxs)(M.a,{open:a,children:[Object(n.jsx)(R.a,{children:"Requisitar amizade"}),Object(n.jsxs)(L.a,{children:[Object(n.jsx)(ce.a,{children:"Digite abaixo o nome de usu\xe1rio que deseja adicionar como amigo."}),Object(n.jsx)(se.a,{autoFocus:!0,margin:"dense",id:"username",label:"Nome de usu\xe1rio",type:"text",value:s,fullWidth:!0,onChange:function(e){o(e.target.value)}})]}),Object(n.jsxs)(F.a,{children:[Object(n.jsx)(G.a,{color:"primary",onClick:function(e){t(s)},children:"Requisitar"}),Object(n.jsx)(G.a,{color:"primary",onClick:function(){t("")},children:"Cancelar"})]})]})})}var le=a(81),ue=a(109),de=Object(j.a)((function(e){return{root:{width:"100%",maxWidth:800,alignSelf:"center"},list:{}}}));function je(e){var t=de(),a=Object(H.g)(),i=sessionStorage.getItem("loggedUsername"),c=Object(r.useState)({requestDialog:!1,deleteDialog:!1}),s=Object(u.a)(c,2),l=s[0],d=s[1],j=Object(r.useState)([]),b=Object(u.a)(j,2),m=b[0],h=b[1],O=Object(r.useState)([]),p=Object(u.a)(O,2),g=p[0],x=p[1],v=Object(r.useState)(!1),I=Object(u.a)(v,2),D=I[0],E=I[1],N=Object(r.useState)(!1),T=Object(u.a)(N,2),q=T[0],P=T[1],W=Object(r.useState)(!1),B=Object(u.a)(W,2),L=B[0],J=B[1],V=Object(r.useState)(!1),_=Object(u.a)(V,2),K=_[0],$=_[1],Q=Object(r.useState)("Sucesso!"),X=Object(u.a)(Q,2),ee=X[0],te=X[1],ae=Object(r.useState)(""),ce=Object(u.a)(ae,2),se=ce[0],je=ce[1];Object(r.useEffect)((function(){e.changeTitle("Amigos")}),[]);Object(r.useEffect)((function(){fetch("/api/friend",{method:"GET",headers:{Authorization:sessionStorage.getItem("token")}}).then((function(e){return e.ok?e:403===e.status?(a.push("/login"),new Error("Forbidden")):new Error("Unexpected response status: "+e.status)})).then((function(e){return e.json()})).then((function(e){var t=e._embedded;h(void 0===t?[]:t.appUserList)}),(function(e){h([])})),E(!0)}),[D]),Object(r.useEffect)((function(){fetch("/api/friend/request",{method:"GET",headers:{Authorization:sessionStorage.getItem("token")}}).then((function(e){switch(e.status){case 200:return e.json();case 403:return a.push("/login"),new Error("User not logged");default:return new Error(e)}})).then((function(e){var t=e._embedded;x(void 0===t?[]:t.friendRequestDTOList)}),(function(e){x([])})),P(!0)}),[q]);var be=function(e,t){return function(a){d(Object(o.a)(Object(o.a)({},t),{},Object(ne.a)({},e,t)))}},me=function(e){var t=Date.now();return e.every((function(e){var a=new Date(e.unavailabilityStartDate),n=new Date(e.unavailabilityEndDate);return Object(le.a)(t,a)&&Object(ue.a)(t,n)}))};return Object(n.jsxs)(U.a,{container:!0,direction:"column",alignItems:"stretch",justify:"flex-start",children:[Object(n.jsx)(S.a,{className:t.root,children:g.map((function(e){return e.sourceUsername===i?Object(n.jsxs)(w.a,{alignItems:"center",disableGutters:!0,button:!0,children:[Object(n.jsx)(C.a,{primary:e.targetUsername,secondary:"Requisitado em ".concat(new Date(e.timestamp).toLocaleString())}),Object(n.jsx)(G.a,{color:"primary",children:"aguardando aprova\xe7\xe3o"})]},e):Object(n.jsxs)(w.a,{alignItems:"center",disableGutters:!0,button:!0,children:[Object(n.jsx)(C.a,{primary:e.sourceUsername,secondary:"Requisitado em ".concat(new Date(e.timestamp).toLocaleString())}),Object(n.jsx)(G.a,{color:"primary",onClick:(t=e.sourceUsername,function(e){fetch("/api/friend/accept?username="+t,{method:"POST",headers:{Authorization:sessionStorage.getItem("token")}}).then((function(e){switch(e.status){case 200:te("Amizade aceita!"),$(!0),J(!0);break;case 403:return void a.push("/login");default:je("Resposta inesperada do servidor"+e.status),$(!1),J(!0)}}),(function(e){je(e.message),$(!1),J(!0)})),E(!1),P(!1)}),children:"Aceitar"})]},e);var t}))}),Object(n.jsx)(y.a,{className:t.root}),Object(n.jsx)(S.a,{className:t.root,children:m.map((function(e){return Object(n.jsxs)(w.a,{alignItems:"center",disableGutters:!0,button:!0,children:[Object(n.jsx)(C.a,{primary:e.userInfo.name,secondary:e.userInfo.username}),Object(n.jsx)(C.a,{children:me(e.shifts)?Object(n.jsx)(re.a,{color:"primary",label:"Dispon\xedvel"}):Object(n.jsx)(re.a,{color:"secondary",label:"Embarcado"})}),Object(n.jsx)(k.a,{edge:"end",children:Object(n.jsx)(f.a,{onClick:be("deleteDialog",!0),children:Object(n.jsx)(ie.a,{color:"error"})})}),Object(n.jsxs)(M.a,{open:l.deleteDialog,children:[Object(n.jsx)(R.a,{children:"Deseja desfazer a amizade?"}),Object(n.jsxs)(F.a,{children:[Object(n.jsx)(G.a,{autoFocus:!0,color:"primary",onClick:(t=e,function(e){fetch("/api/friend/remove?username="+t,{method:"DELETE",headers:{Authorization:sessionStorage.getItem("token")}}).then((function(e){if(204===e.status)$(!0),te("Amizade desfeita com sucesso!"),J(!0);else{if(403===e.status)return void a.push("/login");je("Resposta inesperada do servidor: "+e.status),$(!1),J(!0)}}),(function(e){je(e.message),$(!1),J(!0)})),E(!1),d(Object(o.a)(Object(o.a)({},l),{},{deleteDialog:!1}))}),children:"Aceitar"}),Object(n.jsx)(G.a,{color:"primary",onClick:be("deleteDialog",!1),children:"Cancelar"})]})]})]},e);var t}))}),Object(n.jsx)(U.a,{container:!0,justify:"flex-end",children:Object(n.jsx)(z.a,{color:"primary","aria-label":"add",onClick:be("requestDialog",!0),children:Object(n.jsx)(A.a,{})})}),Object(n.jsx)(U.a,{children:Object(n.jsx)(Y.a,{open:L,autoHideDuration:5e3,onClose:function(){return J(!1)},children:K?Object(n.jsx)(Z,{severity:"success",children:ee}):Object(n.jsx)(Z,{severity:"error",children:se})})}),Object(n.jsx)(oe,{onClose:function(e){null!==e&&""!==e&&fetch("/api/friend/request?username="+e,{method:"POST",headers:{Authorization:sessionStorage.getItem("token")}}).then((function(e){switch(e.status){case 201:te("Amizade requisitada! Aguardando aprova\xe7\xe3o..."),$(!0),J(!0);break;case 403:a.push("/login");break;case 400:je("N\xe3o \xe9 poss\xedvel ser amigo de si mesmo! Tente novamente."),$(!1),J(!0);break;case 404:je("Usu\xe1rio n\xe3o encontrado!"),$(!1),J(!0);break;default:je("Resposta inesperada do servidor: "+e),$(!1),J(!0)}}),(function(e){je(e.message),$(!1),J(!0)})),P(!1),d(Object(o.a)(Object(o.a)({},l),{},{requestDialog:!1}))},open:l.requestDialog})]})}var be=a(23),me=a.n(be),he=a(35),Oe=a(409),pe=a(386);function fe(e){var t=e.onClose,a=e.open,i=Object(r.useState)(""),c=Object(u.a)(i,2),s=c[0],o=c[1];return Object(n.jsx)(U.a,{container:!0,children:Object(n.jsxs)(M.a,{open:a,children:[Object(n.jsx)(R.a,{children:"Tem certeza que deseja deletar sua conta?"}),Object(n.jsxs)(L.a,{children:[Object(n.jsx)(ce.a,{children:"Esta a\xe7\xe3o \xe9 permanente. Para confimar, digite sua senha abaixo:"}),Object(n.jsx)(se.a,{fullWidth:!0,type:"password",label:"Senha",value:s,onChange:function(e){o(e.target.value)}})]}),Object(n.jsxs)(F.a,{children:[Object(n.jsx)(G.a,{autoFocus:!0,onClick:function(){t("")},children:"Cancelar"}),Object(n.jsx)(G.a,{onClick:function(){t(s)},children:"Deletar"})]})]})})}var ge=a(24),xe=a(28);function ve(e){var t=e.onClose,a=e.open,r=e.user,i=xe.a({name:xe.c().max(60,"Deve ter 60 caracteres ou menos").matches(/^([^0-9{}\\/()\]\[]*)$/,"Nome inv\xe1lido").required("Obrigat\xf3rio"),email:xe.c().email("E-mail inv\xe1lido").required("Obrigat\xf3rio")}),c=Object(ge.e)({initialValues:{name:r.name,email:r.email},enableReinitialize:!0,validationSchema:i,onSubmit:function(){var e=Object(he.a)(me.a.mark((function e(a,n){return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({name:a.name,email:a.email});case 2:n.resetForm();case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()});return Object(n.jsx)(U.a,{container:!0,children:Object(n.jsxs)(M.a,{open:a,children:[Object(n.jsx)(R.a,{children:"Editar Conta"}),Object(n.jsx)(L.a,{children:Object(n.jsxs)(U.a,{container:!0,direction:"column",children:[Object(n.jsx)(se.a,{variant:"outlined",margin:"normal",label:"Nome",name:"name",id:"name",value:c.values.name,onChange:c.handleChange,error:c.touched.name&&Boolean(c.errors.name),helperText:c.touched.name&&c.errors.name}),Object(n.jsx)(se.a,{variant:"outlined",margin:"normal",label:"E-mail",name:"email",id:"email",value:c.values.email,onChange:c.handleChange,error:c.touched.email&&Boolean(c.errors.email),helperText:c.touched.email&&c.errors.email})]})}),Object(n.jsxs)(F.a,{children:[Object(n.jsx)(G.a,{onClick:function(){t(null)},children:"Cancelar"}),Object(n.jsx)(G.a,{onClick:c.handleSubmit,children:"Salvar"})]})]})})}var ye=Object(j.a)((function(e){return{paper:{display:"flex",flexDirection:"column",alignItems:"center"},header:{alignSelf:"center"},logo:{marginBottom:e.spacing(3)},editButton:{marginTop:e.spacing(3)},deleteButton:{backgroundColor:"red",color:"white",marginTop:e.spacing(2)}}}));function Se(e){var t=ye(),a=Object(H.g)(),i=Object(r.useState)(!1),c=Object(u.a)(i,2),s=c[0],l=c[1],d=Object(r.useState)(!1),j=Object(u.a)(d,2),m=j[0],h=j[1],O=Object(r.useState)(!1),p=Object(u.a)(O,2),f=p[0],g=p[1],x=Object(r.useState)({editDialog:!1,deleteDialog:!1}),v=Object(u.a)(x,2),S=v[0],w=v[1],k=Object(r.useState)({userId:"",name:"",username:"",email:""}),C=Object(u.a)(k,2),I=C[0],D=C[1],E=Object(r.useState)(!1),N=Object(u.a)(E,2),T=N[0],q=N[1],P=Object(r.useState)(!1),W=Object(u.a)(P,2),z=W[0],A=W[1],B=Object(r.useState)("Sucesso!"),M=Object(u.a)(B,2),R=M[0],L=M[1],F=Object(r.useState)(""),J=Object(u.a)(F,2),V=J[0],_=J[1];Object(r.useEffect)((function(){e.changeTitle("Minha Conta")}),[]),Object(r.useEffect)((function(){fetch("/api/user/me",{method:"GET",headers:{Authorization:sessionStorage.getItem("token")}}).then((function(e){switch(e.status){case 200:return e;case 403:return void a.push("/login");default:A(!1),_("N\xe3o foi poss\xedvel recuperar seus dados! Erro: "+e.status),q(!0)}}),(function(e){_(e.message),A(!1),q(!0)})).then((function(e){return e.json()})).then((function(e){D({userId:e.userId,name:e.userInfo.name,username:e.userInfo.username,email:e.userInfo.email})}),(function(e){_(e.message),A(!1),q(!0)})),l(!0)}),[s]);var K=function(){var e=Object(he.a)(me.a.mark((function e(t){return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t){e.next=5;break}return h(!0),e.next=4,fetch("/api/user",{method:"PUT",headers:{Authorization:sessionStorage.getItem("token"),"Content-Type":"application/json"},body:JSON.stringify({userId:I.userId,name:t.name,email:t.email})}).then((function(e){switch(e.status){case 200:L("Usu\xe1rio editado com sucesso!"),A(!0),q(!0);break;case 403:a.push("/login");break;case 409:A(!1),_("O email j\xe1 existe! Por favor, escolha outro!"),q(!0);break;default:A(!1),_("Erro inesperado do servidor: "+e.status),q(!0)}}),(function(e){A(!1),_(e.message),q(!0)}));case 4:h(!1);case 5:l(!1),w(Object(o.a)(Object(o.a)({},S),{},{editDialog:!1}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(he.a)(me.a.mark((function e(t){return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t&&""===t){e.next=4;break}return g(!0),e.next=4,fetch("/api/user/delete",{method:"DELETE",headers:{Authorization:sessionStorage.getItem("token"),Password:t}}).then((function(e){switch(e.status){case 204:A(!0),L("Conta deletada com sucesso!"),q(!0),sessionStorage.removeItem("token"),sessionStorage.removeItem("loggedUsername"),a.push("/login");break;case 403:a.push("/login"),A(!1),_("Dele\xe7\xe3o n\xe3o autorizada"),q(!0);break;default:A(!1),_("Erro ao deletar: "+e.status),q(!0)}}),(function(e){A(!1),_(e.msg),q(!0)}));case 4:g(!1),w(Object(o.a)(Object(o.a)({},S),{},{deleteDialog:!1}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsxs)(U.a,{container:!0,spacing:3,direction:"column",alignItems:"stretch",children:[Object(n.jsxs)(U.a,{container:!0,item:!0,direction:"column",alignItems:"center",children:[Object(n.jsx)(Oe.a,{className:t.logo}),Object(n.jsx)(b.a,{variant:"h6",children:I.username})]}),Object(n.jsxs)(U.a,{item:!0,children:[Object(n.jsx)(b.a,{variant:"subtitle1",children:"Meus dados"}),Object(n.jsx)(y.a,{}),Object(n.jsxs)(U.a,{direction:"column",container:!0,item:!0,children:[Object(n.jsx)(U.a,{container:!0,direction:"row",children:Object(n.jsx)(se.a,{fullWidth:!0,disabled:!0,variant:"outlined",margin:"normal",label:"Nome",value:I.name})}),Object(n.jsx)(U.a,{container:!0,direction:"row",children:Object(n.jsx)(se.a,{fullWidth:!0,disabled:!0,variant:"outlined",margin:"normal",label:"E-mail",value:I.email})})]}),m&&Object(n.jsx)(pe.a,{}),Object(n.jsx)(G.a,{disabled:m,fullWidth:!0,className:t.editButton,onClick:function(){w(Object(o.a)(Object(o.a)({},S),{},{editDialog:!0}))},variant:"contained",color:"primary",children:"Editar Dados"}),Object(n.jsx)(ve,{onClose:K,open:S.editDialog,user:I})]}),Object(n.jsxs)(U.a,{item:!0,children:[Object(n.jsx)(y.a,{}),f&&Object(n.jsx)(pe.a,{}),Object(n.jsx)(G.a,{disabled:f,fullWidth:!0,className:t.deleteButton,variant:"contained",color:"error",onClick:function(){w(Object(o.a)(Object(o.a)({},S),{},{deleteDialog:!0}))},children:"Apagar Conta"}),Object(n.jsx)(fe,{onClose:$,open:S.deleteDialog})]}),Object(n.jsx)(Y.a,{open:T,autoHideDuration:5e3,onClose:function(){return q(!1)},children:z?Object(n.jsx)(Z,{severity:"success",children:R}):Object(n.jsx)(Z,{severity:"error",children:V})})]})}var we=240,ke=Object(j.a)((function(e){return{root:{display:"flex"},menuButton:{marginRight:e.spacing(2)},hide:{display:"none"},title:{flexGrow:1},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(we,"px)"),marginLeft:we,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},drawer:{width:we,flexShrink:0},drawerHeader:Object(o.a)(Object(o.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-end"}),drawerPaper:{width:we},content:{flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0}}}));function Ce(){var e=ke(),t=Object(H.g)(),a=Object(r.useState)("Minha Escala"),i=Object(u.a)(a,2),c=i[0],s=i[1],o=Object(H.i)(),l=Object(r.useState)(!1),j=Object(u.a)(l,2),h=j[0],q=j[1],P=Object(r.useState)(null),W=Object(u.a)(P,2),U=W[0],z=W[1],A=Object(r.useState)(!1),M=Object(u.a)(A,2),R=M[0],L=M[1],F=Object(r.useState)([]),G=Object(u.a)(F,2),J=G[0],V=G[1],K=function(e){s(e)},$=function(){fetch("/api/shift",{method:"GET",headers:{Authorization:sessionStorage.getItem("token")}}).then((function(e){return 403===e.status?(t.push("/login"),new Error("User not logged")):e.ok?e:void 0})).then((function(e){return e.json()})).then((function(e){var t=e._embedded;V(void 0===t?[]:t.shiftList),L(!0)}),(function(e){L(!0),V([])}))};Object(r.useEffect)((function(){$(),L(!0)}),[R]);var Z=function(e){return function(t){("keydown"!==t.type||"Tab"!==t.key&&"Shift"!==t.key)&&q(e)}},Q=function(){z(null)};return Object(n.jsxs)("div",{className:"root",children:[Object(n.jsx)(m.a,{position:"absolute",className:Object(d.a)(e.appBar,h&&e.appBarShift),children:Object(n.jsxs)(p.a,{children:[Object(n.jsx)(f.a,{edge:"start",color:"inherit","aria-label":"open menu",onClick:Z(!0),className:Object(d.a)(e.menuButton,h&&e.hide),children:Object(n.jsx)(O.a,{})}),Object(n.jsx)(b.a,{variant:"h6",className:e.title,children:c}),Object(n.jsx)(f.a,{color:"inherit",onClick:function(e){z(e.currentTarget)},children:Object(n.jsx)(I.a,{id:"account-circle"})}),Object(n.jsxs)(x.a,{id:"menu-account",anchorEl:U,keepMounted:!0,open:Boolean(U),onClose:Q,children:[Object(n.jsx)(v.a,{disabled:!0,children:sessionStorage.getItem("loggedUsername")}),Object(n.jsx)(y.a,{}),Object(n.jsx)(v.a,{onClick:function(){t.push("/home/account")},children:"Minha Conta"}),Object(n.jsx)(v.a,{onClick:function(){sessionStorage.removeItem("token"),sessionStorage.removeItem("loggedUsername"),t.push("/login"),Q()},children:"Logout"})]})]})}),Object(n.jsxs)(g.a,{variant:"temporary",anchor:"left",open:h,className:e.drawer,classes:{paper:e.drawerPaper},onKeyDown:Z(!1),onClick:Z(!1),children:[Object(n.jsx)("div",{className:e.drawerHeader,children:Object(n.jsx)(f.a,{onClick:Z(!1),children:Object(n.jsx)(D.a,{})})}),Object(n.jsx)(y.a,{}),Object(n.jsxs)(S.a,{onClick:Z(!1),children:[Object(n.jsxs)(w.a,{button:!0,component:B.b,to:"".concat(o.url,"/calendar"),children:[Object(n.jsx)(k.a,{children:Object(n.jsx)(E.a,{})}),Object(n.jsx)(C.a,{primary:"Calend\xe1rio"})]},"calendar"),Object(n.jsxs)(w.a,{button:!0,component:B.b,to:"".concat(o.url,"/shifts"),children:[Object(n.jsx)(k.a,{children:Object(n.jsx)(N.a,{})}),Object(n.jsx)(C.a,{primary:"Escalas"})]},"shifts"),Object(n.jsxs)(w.a,{button:!0,component:B.b,to:"".concat(o.url,"/friends"),children:[Object(n.jsx)(k.a,{children:Object(n.jsx)(T.a,{})}),Object(n.jsx)(C.a,{primary:"Amigos"})]},"friends")]})]}),Object(n.jsx)("div",{className:e.drawerHeader}),Object(n.jsx)("main",{className:e.content,children:Object(n.jsxs)(H.d,{children:[Object(n.jsx)(H.b,{path:"".concat(o.path,"/calendar"),children:Object(n.jsx)(_,{shifts:J,changeTitle:K})}),Object(n.jsx)(H.b,{path:"".concat(o.path,"/shifts"),children:Object(n.jsx)(ae,{shifts:J,fetchShifts:$,changeTitle:K})}),Object(n.jsx)(H.b,{path:"".concat(o.path,"/events")}),Object(n.jsx)(H.b,{path:"".concat(o.path,"/friends"),children:Object(n.jsx)(je,{changeTitle:K})}),Object(n.jsx)(H.b,{exact:!0,path:o.path,children:Object(n.jsx)(H.a,{to:"".concat(o.path,"/calendar")})}),Object(n.jsx)(H.b,{exact:!0,path:"".concat(o.path,"/account"),children:Object(n.jsx)(Se,{changeTitle:K})})]})})]})}var Ie=a(395),De=a(396),Ee=a.p+"static/media/logo.b8b7583f.svg",Ne=a(397),Te=a(108),qe=a(172),Pe=Object(j.a)((function(e){return{paper:{marginTop:e.spacing(6),marginBottom:e.spacing(3),display:"flex",flexDirection:"column",alignItems:"center"},social:{marginBottom:e.spacing(6),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},logo:{width:e.spacing(14),height:e.spacing(14),margin:e.spacing(1)},fb_button:{marginTop:e.spacing(2),color:"white",backgroundColor:Te.a[900],textTransform:"none",fontSize:18},ig_button:{marginTop:e.spacing(2),color:"white",textTransform:"none",backgroundColor:"purple",fontSize:18}}}));function We(){var e=Pe(),t=Object(H.g)(),a=Object(r.useState)({username:"",password:""}),i=Object(u.a)(a,2),c=i[0],s=i[1],l=Object(r.useState)(!1),d=Object(u.a)(l,2),j=d[0],m=d[1],h=Object(r.useState)(""),O=Object(u.a)(h,2),p=O[0],f=O[1],g=Object(r.useState)(!1),x=Object(u.a)(g,2),v=x[0],S=x[1],w=Object(r.useState)(!1),k=Object(u.a)(w,2),C=k[0],I=k[1],D=function(){var e=Object(he.a)(me.a.mark((function e(){var a;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/login",a={method:"POST",mode:"no-cors",body:JSON.stringify({username:c.username,password:c.password})},e.next=4,fetch("/login",a).then((function(e){switch(e.status){case 200:var a=e.headers.get("Authorization").replace("Bearer ",""),n=Object(qe.a)(a).sub;sessionStorage.setItem("token",e.headers.get("Authorization")),sessionStorage.setItem("loggedUsername",n),S(!0),I(!0),setTimeout((function(){t.push("/home")}),500);break;case 403:case 401:S(!1),f("Usu\xe1rio ou senha incorretos!"),I(!0);break;case 500:S(!1),f("Algo deu errado em nosso servidor!"),I(!0);break;default:S(!1),f("Erro inesperado do servidor: "+e.status),I(!0)}}),(function(e){f(e),I(!0)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(e){var t=e.target.name,a=e.target.value;s(Object(o.a)(Object(o.a)({},c),{},Object(ne.a)({},t,a)))},N=function(){var e=Object(he.a)(me.a.mark((function e(t){return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),m(!0),e.next=4,D();case 4:m(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return null!==sessionStorage.getItem("token")&&t.push("/home"),Object(n.jsxs)(Ie.a,{component:"main",maxWidth:"xs",children:[Object(n.jsxs)("div",{className:e.paper,children:[Object(n.jsx)(Oe.a,{className:e.logo,src:Ee}),Object(n.jsx)(b.a,{align:"center",variant:"h4",children:"SeaMates - Agenda Mar\xedtima"}),Object(n.jsxs)("form",{onSubmit:N,className:e.form,noValidate:!0,children:[Object(n.jsx)(se.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Nome de Usu\xe1rio ou Email",name:"username",autoFocus:!0,autoComplete:"email",value:c.username,onChange:E}),Object(n.jsx)(se.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Senha",name:"password",type:"password",autoComplete:"current-password",value:c.password,onChange:E}),j&&Object(n.jsx)(pe.a,{}),Object(n.jsx)(G.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",disabled:j,className:e.submit,children:"Entrar"}),Object(n.jsxs)(U.a,{container:!0,children:[Object(n.jsx)(U.a,{item:!0,xs:!0,children:Object(n.jsx)(De.a,{href:"#",variant:"body2",onClick:function(){t.push("/recovery")},children:"Esqueceu sua senha?"})}),Object(n.jsx)(U.a,{item:!0,children:Object(n.jsx)(De.a,{href:"#",variant:"body2",onClick:function(){t.push("/signup")},children:"N\xe3o tem uma conta? Cadastre-se!"})})]})]}),Object(n.jsx)(Y.a,{open:C,autoHideDuration:5e3,onClose:function(){return I(!1)},children:v?Object(n.jsx)(Z,{severity:"success",children:"Login com sucesso!"}):Object(n.jsx)(Z,{severity:"error",children:p})})]}),Object(n.jsx)(y.a,{}),Object(n.jsx)("div",{className:e.social,children:Object(n.jsx)(G.a,{className:e.fb_button,fullWidth:!0,variant:"contained",startIcon:Object(n.jsx)(Ne.a,{}),href:"oauth2/authorization/facebook",children:"Continue com Facebook"})})]})}var Ue=a(42),ze=Object(j.a)((function(e){return{paper:{marginTop:e.spacing(6),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},logo:{width:e.spacing(14),height:e.spacing(14),margin:e.spacing(1)}}}));function Ae(){var e=ze(),t=Object(H.g)(),a=Object(H.h)(),i=new URLSearchParams(a.search),c=i.get("name"),s=i.get("email"),o=i.get("socialId"),l=i.get("registrationId"),d=Object(r.useState)("Erro cr\xedtico!"),j=Object(u.a)(d,2),m=j[0],h=j[1],O=Object(r.useState)(!1),p=Object(u.a)(O,2),f=p[0],g=p[1],x=Object(r.useState)(!1),v=Object(u.a)(x,2),y=v[0],S=v[1],w=function(){var e=Object(he.a)(me.a.mark((function e(a){var n;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/user/socialSignup",n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a.name,email:a.email,username:a.username,socialId:o,registrationId:l})},e.next=4,fetch("/api/user/socialSignup",n).then((function(e){switch(e.status){case 201:sessionStorage.setItem("token",e.headers.get("Authorization")),sessionStorage.setItem("loggedUsername",a.username),g(!0),h("Usu\xe1rio criado com sucesso! Redirecionando..."),S(!0),setTimeout((function(){t.push("/")}),2e3);break;case 400:g(!1),h("Dados da solicita\xe7\xe3o est\xe3o incorretos! Por favor, verifique-os e tente novamente!"),S(!0);break;case 409:g(!1),h("O usu\xe1rio ou e-mail j\xe1 existem! Por favor, escolha outro!"),S(!0);break;case 500:g(!1),h("Erro inesperado do servidor - 500"),S(!0);break;default:g(!1),h("Erro inesperado: "+e.status),S(!0)}}),(function(e){g(!1),h(e.message)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)(Ie.a,{component:"main",maxWidth:"xs",children:Object(n.jsxs)("div",{className:e.paper,children:[Object(n.jsx)(Oe.a,{className:e.logo,src:Ee}),Object(n.jsx)(b.a,{variant:"h4",children:"Cadastrar novo usu\xe1rio"}),Object(n.jsx)(ge.c,{initialValues:{name:c,email:s},validationSchema:xe.a({name:xe.c().max(60,"Deve ter 60 caracteres ou menos").matches(/^([^0-9{}\\/()\]\[]*)$/,"Nome inv\xe1lido").required("Obrigat\xf3rio"),username:xe.c().min(6,"M\xednimo de 6 letras").max(30,"M\xe1ximo de 30 letras").required("Obrigat\xf3rio"),email:xe.c().email("E-mail inv\xe1lido").required("Obrigat\xf3rio")}),onSubmit:function(){var e=Object(he.a)(me.a.mark((function e(t,a){var n;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.setSubmitting,e.next=3,w(t);case 3:n(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),children:function(t){t.submitForm;var a=t.isSubmitting;return Object(n.jsxs)(ge.b,{className:e.form,children:[Object(n.jsx)(ge.a,{autoFocus:!0,fullWidth:!0,required:!0,margin:"normal",variant:"outlined",component:Ue.a,name:"name",type:"text",label:"Nome e Sobrenome"}),Object(n.jsx)(ge.a,{fullWidth:!0,required:!0,margin:"normal",variant:"outlined",component:Ue.a,name:"email",type:"email",label:"Endere\xe7o de e-mail"}),Object(n.jsx)(ge.a,{fullWidth:!0,required:!0,margin:"normal",variant:"outlined",component:Ue.a,name:"username",type:"text",label:"Nome de Usu\xe1rio"}),a&&Object(n.jsx)(pe.a,{}),Object(n.jsx)(G.a,{className:e.submit,fullWidth:!0,variant:"contained",color:"primary",disabled:a,type:"submit",children:"Cadastrar"})]})}}),Object(n.jsx)(U.a,{container:!0,children:Object(n.jsx)(U.a,{item:!0,xs:!0,children:Object(n.jsx)(B.b,{href:"#",variant:"body2",onClick:function(){t.push("/login")},children:"Voltar para Login"})})}),Object(n.jsx)(Y.a,{open:y,autoHideDuration:5e3,onClose:function(){return S(!1)},children:f?Object(n.jsx)(Z,{severity:"success",children:m}):Object(n.jsx)(Z,{severity:"error",children:m})})]})})}var Be=Object(j.a)((function(e){return{paper:{marginTop:e.spacing(6),marginBottom:e.spacing(3),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},logo:{width:e.spacing(14),height:e.spacing(14),margin:e.spacing(1)}}}));function Me(){var e=Be(),t=Object(H.g)(),a=Object(r.useState)("Erro cr\xedtico!"),i=Object(u.a)(a,2),c=i[0],s=i[1],o=Object(r.useState)(!1),l=Object(u.a)(o,2),d=l[0],j=l[1],m=Object(r.useState)(!1),h=Object(u.a)(m,2),O=h[0],p=h[1],f=function(){var e=Object(he.a)(me.a.mark((function e(a){var n;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/user/signup",n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a.name,email:a.email,username:a.username,password:a.password,confirmPassword:a.confirmPassword})},e.next=4,fetch("/api/user/signup",n).then((function(e){switch(e.status){case 201:j(!0),s("Usu\xe1rio criado com sucesso! Redirecionando para login..."),p(!0),setTimeout((function(){t.push("/login")}),2e3);break;case 400:j(!1),s("Dados da solicita\xe7\xe3o est\xe3o incorretos! Por favor, verifique-os e tente novamente!"),p(!0);break;case 409:j(!1),s("O usu\xe1rio ou e-mail j\xe1 existem! Por favor, escolha outro!"),p(!0);break;case 500:j(!1),s("Erro inesperado do servidor! - 500"),p(!0);break;default:j(!1),s("Erro inesperado: "+e.status),p(!0)}}),(function(e){j(!1),s(e.message)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)(Ie.a,{component:"main",maxWidth:"xs",children:Object(n.jsxs)("div",{className:e.paper,children:[Object(n.jsx)(Oe.a,{className:e.logo,src:Ee}),Object(n.jsx)(b.a,{variant:"h4",children:"Cadastrar novo usu\xe1rio"}),Object(n.jsx)(ge.c,{initialValues:{},validationSchema:xe.a({name:xe.c().max(60,"Deve ter 60 caracteres ou menos").matches(/^([^0-9{}\\/()\]\[]*)$/,"Nome inv\xe1lido").required("Obrigat\xf3rio"),username:xe.c().min(6,"M\xednimo de 6 letras").max(30,"M\xe1ximo de 30 letras").required("Obrigat\xf3rio"),email:xe.c().email("E-mail inv\xe1lido").required("Obrigat\xf3rio"),password:xe.c().min(8,"M\xednimo de 8 caracteres").max(64,"M\xe1ximo de 64 caracteres").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[*.!@$%#^&(){}\[\]:;<>,.?~+-/|/=/\\]).*$/,"Senha deve ter mai\xfasculas, min\xfasculas, n\xfameros e caracteres especiais").required("Obrigat\xf3rio"),confirmPassword:xe.c().oneOf([xe.b("password"),null],"Senha e confirma\xe7\xe3o n\xe3o s\xe3o iguais").required("Obrigat\xf3rio")}),onSubmit:function(){var e=Object(he.a)(me.a.mark((function e(t,a){var n;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.setSubmitting,e.next=3,f(t);case 3:n(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),children:function(t){t.submitForm;var a=t.isSubmitting;return Object(n.jsxs)(ge.b,{className:e.form,children:[Object(n.jsx)(ge.a,{autoFocus:!0,fullWidth:!0,required:!0,margin:"normal",variant:"outlined",component:Ue.a,name:"name",type:"text",label:"Nome e Sobrenome"}),Object(n.jsx)(ge.a,{fullWidth:!0,required:!0,margin:"normal",variant:"outlined",component:Ue.a,name:"email",type:"email",label:"Endere\xe7o de e-mail"}),Object(n.jsx)(ge.a,{fullWidth:!0,required:!0,margin:"normal",variant:"outlined",component:Ue.a,name:"username",type:"text",label:"Nome de Usu\xe1rio"}),Object(n.jsx)(ge.a,{fullWidth:!0,required:!0,margin:"normal",variant:"outlined",component:Ue.a,name:"password",type:"password",label:"Senha"}),Object(n.jsx)(ge.a,{fullWidth:!0,required:!0,margin:"normal",variant:"outlined",component:Ue.a,name:"confirmPassword",type:"password",label:"Confirme sua senha"}),a&&Object(n.jsx)(pe.a,{}),Object(n.jsx)(G.a,{className:e.submit,fullWidth:!0,variant:"contained",color:"primary",disabled:a,type:"submit",children:"Cadastrar"})]})}}),Object(n.jsx)(U.a,{container:!0,children:Object(n.jsx)(U.a,{item:!0,xs:!0,children:Object(n.jsx)(B.b,{href:"#",variant:"body2",onClick:function(){t.push("/login")},children:"Voltar para Login"})})}),Object(n.jsx)(Y.a,{open:O,autoHideDuration:5e3,onClose:function(){return p(!1)},children:d?Object(n.jsx)(Z,{severity:"success",children:c}):Object(n.jsx)(Z,{severity:"error",children:c})})]})})}var Re=a(399),Le=a(398),Fe=a(326),Ge=a(331),He=a(329),Je=a(327),Ve=a(400),_e=a(401),Ke=a(39),$e=a(404),Ze=a(174),Qe=a(91),Xe=a(173),Ye=Object(j.a)((function(e){return{menuButton:{marginRight:e.spacing(2)},hide:{display:"none"},title:{flexGrow:1},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},header:Object(o.a)(Object(o.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-end"}),form:{marginTop:e.spacing(1)},formItems:{padding:e.spacing(1)}}}));function et(e){var t=Ye(),a=Object(H.g)(),i=Object(r.useState)(!1),c=Object(u.a)(i,2),s=c[0],o=c[1],l=Object(r.useState)(""),d=Object(u.a)(l,2),j=d[0],h=d[1],O=Object(r.useState)(!1),g=Object(u.a)(O,2),x=g[0],y=g[1],S=Object(r.useState)(new Date),w=Object(u.a)(S,2),k=w[0],C=w[1],I=Object(r.useState)(new Date),D=Object(u.a)(I,2),E=D[0],N=D[1],T=Object(r.useState)(new Date),q=Object(u.a)(T,2),P=q[0],W=q[1],z=Object(r.useState)(new Date),A=Object(u.a)(z,2),B=A[0],M=A[1],R=Object(r.useState)(0),L=Object(u.a)(R,2),F=L[0],J=L[1],V=Object(r.useState)(!1),_=Object(u.a)(V,2),K=_[0],$=_[1],Q=Object(r.useState)(0),X=Object(u.a)(Q,2),ee=X[0],te=X[1],ae=function(e){return Object(Qe.a)(E,e)},ne=function(){};return Object(n.jsxs)(Ie.a,{component:"main",children:[Object(n.jsx)("div",{children:Object(n.jsx)(m.a,{className:t.appBar,position:"absolute",children:Object(n.jsxs)(p.a,{children:[Object(n.jsx)(f.a,{className:t.menuButton,edge:"start",color:"inherit","aria-label":"go back",onClick:a.goBack,children:Object(n.jsx)(Ve.a,{})}),Object(n.jsx)(b.a,{variant:"h6",className:t.title,children:"Escala"}),Object(n.jsx)(G.a,{variant:"contained",startIcon:Object(n.jsx)(_e.a,{}),onClick:function(e){e.preventDefault(),ne(),fetch("/api/shift/add",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:sessionStorage.getItem("token")},body:JSON.stringify({unavailabilityStartDate:k,boardingDate:E,leavingDate:P,unavailabilityEndDate:B,cycleDays:F,repeat:ee})}).then((function(e){if(!e.ok)throw 403===e.status?(a.push("/login"),new Error("Usu\xe1rio n\xe3o logado!")):e;y(!0),o(!0),setTimeout((function(){a.push("/home")}),2e3)})).catch((function(e){h(e.message),o(!0)}))},children:"Salvar"})]})})}),Object(n.jsx)("div",{className:t.header}),Object(n.jsxs)(U.a,{container:!0,direction:"column",justify:"center",className:t.form,children:[Object(n.jsxs)(Ke.a,{utils:Ze.a,children:[Object(n.jsx)($e.a,{className:t.formItems,margin:"normal",id:"date-unavailable",label:"Indispon\xedvel a partir de",format:"dd/MM/yyyy",value:k,onChange:C,KeyboardButtonProps:{"aria-label":"change date"}}),Object(n.jsx)($e.a,{className:t.formItems,margin:"normal",id:"date-boarding",label:"Data de embarque",format:"dd/MM/yyyy",value:E,onChange:N,KeyboardButtonProps:{"aria-label":"change date"}}),Object(n.jsx)($e.a,{className:t.formItems,disabled:K,margin:"normal",id:"date-leaving",label:"Data de desembarque",format:"dd/MM/yyyy",value:P,onChange:function(e){W(e),K||J(Object(Xe.a)(e,E))},KeyboardButtonProps:{"aria-label":"change date"}}),Object(n.jsx)($e.a,{className:t.formItems,disabled:K,margin:"normal",id:"date-available",label:"Disponivel a partir de:",format:"dd/MM/yyyy",value:B,onChange:M,KeyboardButtonProps:{"aria-label":"change date"}})]}),Object(n.jsxs)(U.a,{container:!0,direction:"row",className:t.formItems,children:[Object(n.jsx)(Re.a,{control:Object(n.jsx)(Le.a,{checked:K,onChange:function(e){var t=e.target.checked;$(t)},name:"checked cycle",color:"primary"})}),Object(n.jsx)(se.a,{disabled:!K,id:"cycle-days",label:"N\xba de dias embarcado",type:"number",InputLabelProps:{shrink:!0},value:F,onChange:function(e){var t=e.target.value;t<0&&(t=0),J(t);var a=ae(t);W(a),M(a)}})]}),Object(n.jsxs)(Fe.a,{className:t.formItems,children:[Object(n.jsx)(Ge.a,{id:"repeat-cycle-label",className:t.formItems,children:"Repetir"}),Object(n.jsxs)(He.a,{labelId:"repeat-cycle-label",id:"repeat-cycle-select",value:ee,onChange:function(e){te(e.target.value)},children:[Object(n.jsx)(v.a,{value:0,children:"N\xe3o"}),Object(n.jsx)(v.a,{value:1,children:"1x"}),Object(n.jsx)(v.a,{value:2,children:"2x"}),Object(n.jsx)(v.a,{value:3,children:"3x"}),Object(n.jsx)(v.a,{value:4,children:"4x"}),Object(n.jsx)(v.a,{value:5,children:"5x"}),Object(n.jsx)(v.a,{value:6,children:"6x"}),Object(n.jsx)(v.a,{value:7,children:"7x"}),Object(n.jsx)(v.a,{value:8,children:"8x"}),Object(n.jsx)(v.a,{value:9,children:"9x"}),Object(n.jsx)(v.a,{value:10,children:"10x"}),Object(n.jsx)(v.a,{value:11,children:"11x"}),Object(n.jsx)(v.a,{value:12,children:"12x"})]}),Object(n.jsx)(Je.a,{children:"Selecione por quantas vezes repetir a escala"})]})]}),Object(n.jsx)(Y.a,{open:s,autoHideDuration:3e3,onClose:function(){o(!1),x&&a.goBack()},children:x?Object(n.jsx)(Z,{severity:"success",children:"Escala(s) salva!"}):Object(n.jsx)(Z,{severity:"error",children:j})})]})}var tt=Object(j.a)((function(e){return{paper:{marginTop:e.spacing(8),maxWidth:500,alignContent:"center"},header:{marginBottom:e.spacing(3)},submit:{marginTop:e.spacing(1)},footer:{marginTop:e.spacing(2)}}}));function at(){var e=tt(),t=Object(H.g)(),a=Object(r.useState)(""),i=Object(u.a)(a,2),c=i[0],s=i[1],o=Object(r.useState)(!1),l=Object(u.a)(o,2),d=l[0],j=l[1],m=Object(r.useState)({title:"Ops...",message:"N\xe3o foi poss\xedvel enviar a recupera\xe7\xe3o! Por favor, recarregue a p\xe1gina e tente novamente"}),h=Object(u.a)(m,2),O=h[0],p=h[1],f=function(){var e=Object(he.a)(me.a.mark((function e(){return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/user/recover?user="+c,{method:"POST"}).then((function(e){e.ok&&p({title:"Recupera\xe7\xe3o em andamento!",message:"Um e-mail com instru\xe7\xf5es para troca de senha foi enviado para o e-mail de recupera\xe7\xe3o de sua conta. Por favor, cheque sua caixa de e-mail e siga o link fornecido para continuar o procedimento."})}),(function(e){}));case 2:j(!0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsx)(Ie.a,{className:e.paper,children:Object(n.jsxs)(U.a,{container:!0,direction:"column",children:[Object(n.jsx)(U.a,{item:!0,xs:!0,className:e.header,children:Object(n.jsx)(b.a,{variant:"h5",children:"Recupera\xe7\xe3o de conta"})}),Object(n.jsxs)(U.a,{item:!0,children:[Object(n.jsx)(b.a,{children:"Digite seu nome de usu\xe1rio para recupera\xe7\xe3o de conta:"}),Object(n.jsx)(se.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"forgot-input",label:"Nome de usu\xe1rio para recupera\xe7\xe3o",name:"username",autoComplete:"username",autoFocus:!0,value:c,onChange:function(e){s(e.target.value)}}),Object(n.jsx)(G.a,{className:e.submit,variant:"contained",color:"primary",onClick:f,fullWidth:!0,children:"Enviar"})]}),Object(n.jsx)(U.a,{item:!0,xs:!0,className:e.footer,children:Object(n.jsx)(De.a,{href:"#",variant:"body2",onClick:function(){t.push("/login")},children:"Retornar para Login"})}),Object(n.jsxs)(M.a,{open:d,fullWidth:!0,children:[Object(n.jsx)(R.a,{children:O.title}),Object(n.jsx)(L.a,{children:Object(n.jsx)(ce.a,{children:O.message})}),Object(n.jsx)(F.a,{children:Object(n.jsx)(G.a,{onClick:function(){j(!1)},children:"OK"})})]})]})})}var nt=Object(j.a)((function(e){return{paper:{marginTop:e.spacing(6),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(1)},header:{marginBottom:e.spacing(2)},submit:{margin:e.spacing(3,0,2)},footer:{marginTop:e.spacing(2)}}}));function rt(){var e=nt(),t=Object(H.h)(),a=Object(H.g)(),i=new URLSearchParams(t.search).get("reset"),c=Object(r.useState)({username:"",password:"",confirm:""}),s=Object(u.a)(c,2),l=s[0],d=s[1],j=Object(r.useState)(!1),m=Object(u.a)(j,2),h=m[0],O=m[1],p=Object(r.useState)(!1),f=Object(u.a)(p,2),g=f[0],x=f[1],v=Object(r.useState)({title:"Ops...",message:"Um erro aconteceu! Contate-nos para mais informa\xe7\xf5es!"}),y=Object(u.a)(v,2),S=y[0],w=y[1],k=function(){var e=Object(he.a)(me.a.mark((function e(){return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/user/resetPassword",{method:"POST",headers:{reset:i,"Content-Type":"application/json"},body:JSON.stringify({username:l.username,password:l.password,confirmPassword:l.confirm})}).then((function(e){switch(e.status){case 200:w({title:"Sucesso!",message:"Sua senha foi redefinida. Por favor, efetue o login normalmente!"}),x(!0),O(!0);break;case 403:a.push("/login");break;case 400:x(!0);break;default:w(Object(o.a)(Object(o.a)({},S),{},{message:"Algo deu errado em sua solicita\xe7\xe3o! Por favor, atualize a p\xe1gina e tente novamente!"})),x(!0)}}),(function(e){w(Object(o.a)(Object(o.a)({},S),{},{message:"Algo deu errado em nosso servidor! Por favor, atualize a p\xe1gina e tente novamente!"})),x(!0)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return null===i&&a.push("/login"),Object(n.jsx)(Ie.a,{component:"main",maxWidth:"xs",children:Object(n.jsxs)("div",{className:e.paper,children:[Object(n.jsx)(b.a,{variant:"h4",children:"Recupera\xe7\xe3o de senha"}),Object(n.jsx)(ge.c,{initialValues:{},validationSchema:xe.a({username:xe.c().required("Obrigat\xf3rio"),password:xe.c().min(8,"M\xednimo de 8 caracteres").max(64,"M\xe1ximo de 64 caracteres").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[*.!@$%#^&(){}\[\]:;<>,.?~+-/|/=/\\]).*$/,"Senha deve ter mai\xfasculas, min\xfasculas, n\xfameros e caracteres especiais").required("Obrigat\xf3rio"),confirm:xe.c().oneOf([xe.b("password"),null],"Senha e confirma\xe7\xe3o n\xe3o s\xe3o iguais").required("Obrigat\xf3rio")}),onSubmit:function(){var e=Object(he.a)(me.a.mark((function e(t,a){var n;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.setSubmitting,d(t),e.next=4,k();case 4:n(!1);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),children:function(t){t.submitForm;var a=t.isSubmitting;return Object(n.jsxs)(ge.b,{className:e.form,children:[Object(n.jsx)(ge.a,{fullWidth:!0,required:!0,margin:"normal",variant:"outlined",component:Ue.a,name:"username",type:"text",label:"Nome de Usu\xe1rio"}),Object(n.jsx)(ge.a,{fullWidth:!0,required:!0,margin:"normal",variant:"outlined",component:Ue.a,name:"password",type:"password",label:"Senha"}),Object(n.jsx)(ge.a,{fullWidth:!0,required:!0,margin:"normal",variant:"outlined",component:Ue.a,name:"confirm",type:"password",label:"Confirme sua senha"}),a&&Object(n.jsx)(pe.a,{}),Object(n.jsx)(G.a,{className:e.submit,fullWidth:!0,variant:"contained",color:"primary",disabled:a,type:"submit",children:"Enviar"})]})}}),Object(n.jsxs)(M.a,{open:g,fullWidth:!0,children:[Object(n.jsx)(R.a,{children:S.title}),Object(n.jsx)(L.a,{children:Object(n.jsx)(ce.a,{children:S.message})}),Object(n.jsx)(F.a,{children:Object(n.jsx)(G.a,{onClick:function(){h&&a.push("/login"),x(!1)},children:"OK"})})]})]})})}var it=a(175),ct=a(402),st=a(403);function ot(){var e=Object(H.h)(),t=Object(H.g)(),a=new URLSearchParams(e.search),n=a.get("token"),r=a.get("user");return sessionStorage.setItem("token","Bearer "+n),sessionStorage.setItem("loggedUsername",r),t.push("/"),null}var lt=Object(it.a)({palette:{common:{black:"#000",white:"#fff"},background:{paper:"rgba(235, 246, 249, 1)",default:"#fafafa"},primary:{light:"#456da2",main:"#064273",dark:"#001c47",contrastText:"#ffffff"},secondary:{light:"#a8e8f7",main:"#76b6c4",dark:"#458694",contrastText:"#ffffff"},error:{light:"#e57373",main:"#f44336",dark:"#d32f2f",contrastText:"#fff"},text:{primary:"#000000",secondary:"#000000",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"}},typography:{button:{fontSize:"1rem",fontWeight:"500",letterSpacing:"0.02857em"}}});function ut(e){var t=e.children,a=Object(l.a)(e,["children"]),r=sessionStorage.getItem("token");return Object(n.jsx)(H.b,Object(o.a)(Object(o.a)({},a),{},{render:function(e){var a=e.location;return r?t:Object(n.jsx)(H.a,{to:{pathname:"/login",state:{from:a}}})}}))}function dt(){return Object(n.jsx)(i.a.Fragment,{children:Object(n.jsxs)(ct.a,{theme:lt,children:[Object(n.jsx)(st.a,{}),Object(n.jsx)(B.a,{children:Object(n.jsxs)(H.d,{children:[Object(n.jsx)(ut,{exact:!0,path:"/",children:Object(n.jsx)(H.a,{to:"/home"})}),Object(n.jsx)(H.b,{exact:!0,path:"/login",children:Object(n.jsx)(We,{})}),Object(n.jsx)(H.b,{exact:!0,path:"/signup",children:Object(n.jsx)(Me,{})}),Object(n.jsx)(ut,{path:"/home",children:Object(n.jsx)(Ce,{})}),Object(n.jsx)(ut,{exact:!0,path:"/shift",children:Object(n.jsx)(et,{})}),Object(n.jsx)(H.b,{exact:!0,path:"/recovery",children:Object(n.jsx)(at,{})}),Object(n.jsx)(H.b,{exact:!0,path:"/changePassword",children:Object(n.jsx)(rt,{})}),Object(n.jsx)(H.b,{exact:!0,path:"/loginSuccess",children:Object(n.jsx)(ot,{})}),Object(n.jsx)(H.b,{exact:!0,path:"/socialSignup",children:Object(n.jsx)(Ae,{})})]})})]})})}s.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(dt,{})}),document.getElementById("root"))}},[[319,1,2]]]);
//# sourceMappingURL=main.58ef9881.chunk.js.map