(this["webpackJsonpms-view"]=this["webpackJsonpms-view"]||[]).push([[0],{209:function(e,t,a){},320:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(0),i=a.n(r),c=a(21),s=a.n(c),o=(a(209),a(19)),l=a(5),u=a(8),d=a(6),j=a(375),b=a(67),m=a(387),h=a(174),O=a.n(h),p=a(388),f=a(323),x=a(389),g=a(175),v=a.n(g),y=a(412),S=a(181),w=a(391),k=a(372),C=a(370),I=a(322),D=a(378),E=a(371),N=a(390),T=a(392),q=a(393),P=a(394),W=a(395),U=a(396),z=a(180),A=a(166),B=a(167),M=a(369),R=a(376),L=a(377),F=a(28),G=a(363),H=a(367),J=a(368),V=a(373),_=a(374),K=a(26);function $(e){var t=e.open,a=e.onClose,i=e.date,c=new Date(i),s=Object(K.g)(),o=Object(r.useState)([]),l=Object(u.a)(o,2),d=l[0],j=l[1],m=Object(r.useState)(!1),h=Object(u.a)(m,2),O=h[0],p=h[1];return Object(r.useEffect)((function(){return fetch("/api/calendar/available?date="+c.toISOString().substr(0,10),{method:"GET",headers:{Authorization:sessionStorage.getItem("token")}}).then((function(e){return e.ok?e.json():403===e.status?(s.push("/login"),new Error("User not logged")):(j([]),new Error("Error fetching friends: "+e.status))})).then((function(e){void 0===e._embedded?j([]):j(e._embedded.appUserList)}),(function(e){j([])})),function(){return p(!0)}}),[O]),Object(n.jsxs)(G.a,{open:t,maxWidth:"xs",fullWidth:!0,children:[Object(n.jsx)(H.a,{children:"Dia ".concat(c.toLocaleDateString())}),Object(n.jsx)(J.a,{dividers:!0,children:Object(n.jsxs)(M.a,{container:!0,direction:"column",spacing:3,children:[Object(n.jsx)(M.a,{item:!0,children:Object(n.jsx)(b.a,{variant:"subtitle1",children:"Amigos em terra"})}),Object(n.jsx)(M.a,{item:!0,children:0===d.length?Object(n.jsx)(b.a,{variant:"h6",children:"Nenhum amigo dispon\xedvel"}):Object(n.jsx)(C.a,{disablePadding:!0,children:d.map((function(e){return Object(n.jsx)(I.a,{dense:!0,children:Object(n.jsx)(E.a,{primary:e.userInfo.name})},e)}))})}),Object(n.jsx)(M.a,{item:!0,children:Object(n.jsx)(k.a,{})}),Object(n.jsx)(M.a,{item:!0,children:Object(n.jsx)(b.a,{variant:"subtitle1",children:"Eventos"})}),Object(n.jsx)(M.a,{item:!0,container:!0,xs:!0,justify:"center",alignItems:"center",children:Object(n.jsx)(b.a,{variant:"body1",children:"-"})})]})}),Object(n.jsx)(V.a,{children:Object(n.jsx)(_.a,{color:"primary",onClick:a,children:"Fechar"})})]})}var Z=Object(j.a)((function(e){return{fab:{position:"fixed",right:"20px",bottom:"20px",zIndex:100}}}));function Q(e){var t=Z(),a=Object(r.useState)(!1),i=Object(u.a)(a,2),c=i[0],s=i[1],o=Object(r.useState)((new Date).toISOString()),l=Object(u.a)(o,2),d=l[0],j=l[1];Object(r.useEffect)((function(){e.changeTitle("Calend\xe1rio")}),[]);return Object(n.jsxs)(M.a,{container:!0,spacing:3,children:[Object(n.jsx)(M.a,{item:!0,children:Object(n.jsx)(z.a,{plugins:[A.a,B.a],initialView:"dayGridMonth",selectable:!0,height:"auto",contentHeight:"auto",locale:"pt-br",events:function(e){return e.shifts.map((function(e){return[{id:e.shiftId,title:"Pr\xe9-embarque",start:e.unavailabilityStartDate,end:e.boardingDate,display:"block",backgroundColor:"rgb(255,92,0)",allDay:"true",extendedProps:{group:e.shiftId}},{id:"board"+e.shiftId,title:"A bordo",start:e.boardingDate,end:e.leavingDate,display:"block",backgroundColor:"rgb(170,0,0)",allDay:"true",extendedProps:{group:e.shiftId}},{id:"available"+e.shiftId,title:"P\xf3s-embarque",start:e.leavingDate,end:e.unavailabilityEndDate,display:"block",backgroundColor:"rgb(0,185,185)",allDay:"true",extendedProps:{group:e.shiftId}}]})).flat()}(e),dateClick:function(e){j(e.dateStr),s(!0)}})}),Object(n.jsxs)(R.a,{className:t.fab,variant:"extended",color:"primary","aria-label":"add",component:F.b,to:"/shift",children:[Object(n.jsx)(L.a,{}),"Escala"]}),Object(n.jsx)($,{open:c,onClose:function(){s(!1)},date:d})]})}var X=a(32),Y=a(407);function ee(e){return Object(n.jsx)(Y.a,Object(o.a)({elevation:6,variant:"filled"},e))}var te=a(408),ae=a(379),ne=a(409),re=a(380),ie=a(381);function ce(e){var t=Object(K.g)(),a=i.a.useState([0]),c=Object(u.a)(a,2),s=c[0],o=c[1],l=Object(r.useState)(!1),d=Object(u.a)(l,2),j=d[0],m=d[1],h=Object(r.useState)(!1),O=Object(u.a)(h,2),p=O[0],f=O[1],x=Object(r.useState)("Sucesso!"),g=Object(u.a)(x,2),v=g[0],y=g[1],S=Object(r.useState)(""),w=Object(u.a)(S,2),k=w[0],N=w[1];Object(r.useEffect)((function(){e.changeTitle("Escalas")}),[]);var T=function(e){return function(){var t=s.indexOf(e.shiftId),a=Object(X.a)(s);-1===t?a.push(e.shiftId):a.splice(t,1),o(a)}};return Object(n.jsxs)(M.a,{container:!0,direction:"column",alignItems:"stretch",children:[Object(n.jsx)(M.a,{container:!0,justify:"center",children:Object(n.jsx)(C.a,{children:null===e.shifts?[]:e.shifts.map((function(e){return Object(n.jsxs)(I.a,{button:!0,onClick:T(e),children:[Object(n.jsx)(D.a,{children:Object(n.jsx)(te.a,{edge:"start",checked:-1!==s.indexOf(e.shiftId),tabIndex:-1,disableRipple:!0})}),Object(n.jsx)(ae.a,{children:Object(n.jsx)(b.a,{variant:"h6",children:e.shiftId})}),Object(n.jsx)(E.a,{primary:"de ".concat(e.unavailabilityStartDate," at\xe9 ").concat(e.unavailabilityEndDate)})]},e)}))})}),Object(n.jsxs)(M.a,{container:!0,justify:"flex-end",children:[Object(n.jsx)(R.a,{color:"primary","aria-label":"add",component:F.b,to:"/shift",children:Object(n.jsx)(L.a,{})}),Object(n.jsx)(R.a,{color:"default",disabled:!0,"aria-label":"edit",children:Object(n.jsx)(re.a,{})}),Object(n.jsx)(R.a,{color:"secondary","aria-label":"delete",onClick:function(a){if(a.preventDefault(),1===s.length)return f(!1),N("Nenhuma escala selecionada!"),void m(!0);s.forEach((function(e){0!==e&&fetch("/api/shift/remove?id="+e,{method:"DELETE",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:sessionStorage.getItem("token")}}).then((function(e){switch(e.status){case 204:f(!0),y("Escala(s) deletada(s)!"),m(!0),setTimeout((function(){t.push("/home/shifts")}),2e3);break;case 403:throw t.push("/login"),new Error("Usu\xe1rio n\xe3o logado!");case 404:throw new Error("Escala n\xe3o encontrada no servidor!");default:throw new Error("Unexpected server response: "+e.status)}})).catch((function(e){f(!1),N(e.message),m(!0)}))})),e.fetchShifts()},children:Object(n.jsx)(ie.a,{})})]}),Object(n.jsx)(M.a,{children:Object(n.jsx)(ne.a,{open:j,autoHideDuration:5e3,onClose:function(){return m(!1)},children:p?Object(n.jsx)(ee,{severity:"success",children:v}):Object(n.jsx)(ee,{severity:"error",children:k})})})]})}var se=a(14),oe=a(410),le=a(385),ue=a(382),de=a(383);function je(e){var t=e.onClose,a=e.open,i=Object(r.useState)(""),c=Object(u.a)(i,2),s=c[0],o=c[1];return Object(n.jsx)(M.a,{container:!0,children:Object(n.jsxs)(G.a,{open:a,children:[Object(n.jsx)(H.a,{children:"Requisitar amizade"}),Object(n.jsxs)(J.a,{children:[Object(n.jsx)(ue.a,{children:"Digite abaixo o nome de usu\xe1rio que deseja adicionar como amigo."}),Object(n.jsx)(de.a,{autoFocus:!0,margin:"dense",id:"username",label:"Nome de usu\xe1rio",type:"text",value:s,fullWidth:!0,onChange:function(e){o(e.target.value)}})]}),Object(n.jsxs)(V.a,{children:[Object(n.jsx)(_.a,{color:"primary",onClick:function(e){t(s)},children:"Requisitar"}),Object(n.jsx)(_.a,{color:"primary",onClick:function(){t("")},children:"Cancelar"})]})]})})}var be=a(81),me=a(109),he=Object(j.a)((function(e){return{root:{width:"100%",maxWidth:800,alignSelf:"center"},list:{}}}));function Oe(e){var t=he(),a=Object(K.g)(),i=sessionStorage.getItem("loggedUsername"),c=Object(r.useState)({requestDialog:!1,deleteDialog:!1}),s=Object(u.a)(c,2),l=s[0],d=s[1],j=Object(r.useState)([]),b=Object(u.a)(j,2),m=b[0],h=b[1],O=Object(r.useState)([]),p=Object(u.a)(O,2),x=p[0],g=p[1],v=Object(r.useState)(!1),y=Object(u.a)(v,2),S=y[0],w=y[1],N=Object(r.useState)(!1),T=Object(u.a)(N,2),q=T[0],P=T[1],W=Object(r.useState)(!1),U=Object(u.a)(W,2),z=U[0],A=U[1],B=Object(r.useState)(!1),F=Object(u.a)(B,2),J=F[0],$=F[1],Z=Object(r.useState)("Sucesso!"),Q=Object(u.a)(Z,2),X=Q[0],Y=Q[1],te=Object(r.useState)(""),ae=Object(u.a)(te,2),re=ae[0],ie=ae[1];Object(r.useEffect)((function(){e.changeTitle("Amigos")}),[]);Object(r.useEffect)((function(){fetch("/api/friend",{method:"GET",headers:{Authorization:sessionStorage.getItem("token")}}).then((function(e){return e.ok?e:403===e.status?(a.push("/login"),new Error("Forbidden")):new Error("Unexpected response status: "+e.status)})).then((function(e){return e.json()})).then((function(e){var t=e._embedded;h(void 0===t?[]:t.appUserList)}),(function(e){h([])})),w(!0)}),[S]),Object(r.useEffect)((function(){fetch("/api/friend/request",{method:"GET",headers:{Authorization:sessionStorage.getItem("token")}}).then((function(e){switch(e.status){case 200:return e.json();case 403:return a.push("/login"),new Error("User not logged");default:return new Error(e)}})).then((function(e){var t=e._embedded;g(void 0===t?[]:t.friendRequestDTOList)}),(function(e){g([])})),P(!0)}),[q]);var ce=function(e,t){return function(a){d(Object(o.a)(Object(o.a)({},t),{},Object(se.a)({},e,t)))}},ue=function(e){var t=Date.now();return e.every((function(e){var a=new Date(e.unavailabilityStartDate),n=new Date(e.unavailabilityEndDate);return Object(be.a)(t,a)&&Object(me.a)(t,n)}))};return Object(n.jsxs)(M.a,{container:!0,direction:"column",alignItems:"stretch",justify:"flex-start",children:[Object(n.jsx)(C.a,{className:t.root,children:x.map((function(e){return e.sourceUsername===i?Object(n.jsxs)(I.a,{alignItems:"center",disableGutters:!0,button:!0,children:[Object(n.jsx)(E.a,{primary:e.targetUsername,secondary:"Requisitado em ".concat(new Date(e.timestamp).toLocaleString())}),Object(n.jsx)(_.a,{color:"primary",children:"aguardando aprova\xe7\xe3o"})]},e):Object(n.jsxs)(I.a,{alignItems:"center",disableGutters:!0,button:!0,children:[Object(n.jsx)(E.a,{primary:e.sourceUsername,secondary:"Requisitado em ".concat(new Date(e.timestamp).toLocaleString())}),Object(n.jsx)(_.a,{color:"primary",onClick:(t=e.sourceUsername,function(e){fetch("/api/friend/accept?username="+t,{method:"POST",headers:{Authorization:sessionStorage.getItem("token")}}).then((function(e){switch(e.status){case 200:Y("Amizade aceita!"),$(!0),A(!0);break;case 403:return void a.push("/login");default:ie("Resposta inesperada do servidor"+e.status),$(!1),A(!0)}}),(function(e){ie(e.message),$(!1),A(!0)})),w(!1),P(!1)}),children:"Aceitar"})]},e);var t}))}),Object(n.jsx)(k.a,{className:t.root}),Object(n.jsx)(C.a,{className:t.root,children:m.map((function(e){return Object(n.jsxs)(I.a,{alignItems:"center",disableGutters:!0,button:!0,children:[Object(n.jsx)(E.a,{primary:e.userInfo.name,secondary:e.userInfo.username}),Object(n.jsx)(E.a,{children:ue(e.shifts)?Object(n.jsx)(oe.a,{color:"primary",label:"Dispon\xedvel"}):Object(n.jsx)(oe.a,{color:"secondary",label:"Embarcado"})}),Object(n.jsx)(D.a,{edge:"end",children:Object(n.jsx)(f.a,{onClick:ce("deleteDialog",!0),children:Object(n.jsx)(le.a,{color:"error"})})}),Object(n.jsxs)(G.a,{open:l.deleteDialog,children:[Object(n.jsx)(H.a,{children:"Deseja desfazer a amizade?"}),Object(n.jsxs)(V.a,{children:[Object(n.jsx)(_.a,{autoFocus:!0,color:"primary",onClick:(t=e,function(e){fetch("/api/friend/remove?username="+t,{method:"DELETE",headers:{Authorization:sessionStorage.getItem("token")}}).then((function(e){if(204===e.status)$(!0),Y("Amizade desfeita com sucesso!"),A(!0);else{if(403===e.status)return void a.push("/login");ie("Resposta inesperada do servidor: "+e.status),$(!1),A(!0)}}),(function(e){ie(e.message),$(!1),A(!0)})),w(!1),d(Object(o.a)(Object(o.a)({},l),{},{deleteDialog:!1}))}),children:"Aceitar"}),Object(n.jsx)(_.a,{color:"primary",onClick:ce("deleteDialog",!1),children:"Cancelar"})]})]})]},e);var t}))}),Object(n.jsx)(M.a,{container:!0,justify:"flex-end",children:Object(n.jsx)(R.a,{color:"primary","aria-label":"add",onClick:ce("requestDialog",!0),children:Object(n.jsx)(L.a,{})})}),Object(n.jsx)(M.a,{children:Object(n.jsx)(ne.a,{open:z,autoHideDuration:5e3,onClose:function(){return A(!1)},children:J?Object(n.jsx)(ee,{severity:"success",children:X}):Object(n.jsx)(ee,{severity:"error",children:re})})}),Object(n.jsx)(je,{onClose:function(e){null!==e&&""!==e&&fetch("/api/friend/request?username="+e,{method:"POST",headers:{Authorization:sessionStorage.getItem("token")}}).then((function(e){switch(e.status){case 201:Y("Amizade requisitada! Aguardando aprova\xe7\xe3o..."),$(!0),A(!0);break;case 403:a.push("/login");break;case 400:ie("N\xe3o \xe9 poss\xedvel ser amigo de si mesmo! Tente novamente."),$(!1),A(!0);break;case 404:ie("Usu\xe1rio n\xe3o encontrado!"),$(!1),A(!0);break;default:ie("Resposta inesperada do servidor: "+e),$(!1),A(!0)}}),(function(e){ie(e.message),$(!1),A(!0)})),P(!1),d(Object(o.a)(Object(o.a)({},l),{},{requestDialog:!1}))},open:l.requestDialog})]})}var pe=a(23),fe=a.n(pe),xe=a(35),ge=a(411),ve=a(386);function ye(e){var t=e.onClose,a=e.open,i=Object(r.useState)(""),c=Object(u.a)(i,2),s=c[0],o=c[1];return Object(n.jsx)(M.a,{container:!0,children:Object(n.jsxs)(G.a,{open:a,children:[Object(n.jsx)(H.a,{children:"Tem certeza que deseja deletar sua conta?"}),Object(n.jsxs)(J.a,{children:[Object(n.jsx)(ue.a,{children:"Esta a\xe7\xe3o \xe9 permanente. Para confimar, digite sua senha abaixo:"}),Object(n.jsx)(de.a,{fullWidth:!0,type:"password",label:"Senha",value:s,onChange:function(e){o(e.target.value)}})]}),Object(n.jsxs)(V.a,{children:[Object(n.jsx)(_.a,{autoFocus:!0,onClick:function(){t("")},children:"Cancelar"}),Object(n.jsx)(_.a,{onClick:function(){t(s)},children:"Deletar"})]})]})})}var Se=a(25),we=a(29);function ke(e){var t=e.onClose,a=e.open,r=e.user,i=we.a({name:we.c().max(60,"Deve ter 60 caracteres ou menos").matches(/^([^0-9{}\\/()\]\[]*)$/,"Nome inv\xe1lido").required("Obrigat\xf3rio"),email:we.c().email("E-mail inv\xe1lido").required("Obrigat\xf3rio")}),c=Object(Se.e)({initialValues:{name:r.name,email:r.email},enableReinitialize:!0,validationSchema:i,onSubmit:function(){var e=Object(xe.a)(fe.a.mark((function e(a,n){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({name:a.name,email:a.email});case 2:n.resetForm();case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()});return Object(n.jsx)(M.a,{container:!0,children:Object(n.jsxs)(G.a,{open:a,children:[Object(n.jsx)(H.a,{children:"Editar Conta"}),Object(n.jsx)(J.a,{children:Object(n.jsxs)(M.a,{container:!0,direction:"column",children:[Object(n.jsx)(de.a,{variant:"outlined",margin:"normal",label:"Nome",name:"name",id:"name",value:c.values.name,onChange:c.handleChange,error:c.touched.name&&Boolean(c.errors.name),helperText:c.touched.name&&c.errors.name}),Object(n.jsx)(de.a,{variant:"outlined",margin:"normal",label:"E-mail",name:"email",id:"email",value:c.values.email,onChange:c.handleChange,error:c.touched.email&&Boolean(c.errors.email),helperText:c.touched.email&&c.errors.email})]})}),Object(n.jsxs)(V.a,{children:[Object(n.jsx)(_.a,{onClick:function(){t(null)},children:"Cancelar"}),Object(n.jsx)(_.a,{onClick:c.handleSubmit,children:"Salvar"})]})]})})}var Ce=Object(j.a)((function(e){return{paper:{display:"flex",flexDirection:"column",alignItems:"center"},header:{alignSelf:"center"},logo:{marginBottom:e.spacing(3)},editButton:{marginTop:e.spacing(3)},deleteButton:{backgroundColor:"red",color:"white",marginTop:e.spacing(2)}}}));function Ie(e){var t=Ce(),a=Object(K.g)(),i=Object(r.useState)(!1),c=Object(u.a)(i,2),s=c[0],l=c[1],d=Object(r.useState)(!1),j=Object(u.a)(d,2),m=j[0],h=j[1],O=Object(r.useState)(!1),p=Object(u.a)(O,2),f=p[0],x=p[1],g=Object(r.useState)({editDialog:!1,deleteDialog:!1}),v=Object(u.a)(g,2),y=v[0],S=v[1],w=Object(r.useState)({userId:"",name:"",username:"",email:""}),C=Object(u.a)(w,2),I=C[0],D=C[1],E=Object(r.useState)(!1),N=Object(u.a)(E,2),T=N[0],q=N[1],P=Object(r.useState)(!1),W=Object(u.a)(P,2),U=W[0],z=W[1],A=Object(r.useState)("Sucesso!"),B=Object(u.a)(A,2),R=B[0],L=B[1],F=Object(r.useState)(""),G=Object(u.a)(F,2),H=G[0],J=G[1];Object(r.useEffect)((function(){e.changeTitle("Minha Conta")}),[]),Object(r.useEffect)((function(){fetch("/api/user/me",{method:"GET",headers:{Authorization:sessionStorage.getItem("token")}}).then((function(e){switch(e.status){case 200:return e;case 403:return void a.push("/login");default:z(!1),J("N\xe3o foi poss\xedvel recuperar seus dados! Erro: "+e.status),q(!0)}}),(function(e){J(e.message),z(!1),q(!0)})).then((function(e){return e.json()})).then((function(e){D({userId:e.userId,name:e.userInfo.name,username:e.userInfo.username,email:e.userInfo.email})}),(function(e){J(e.message),z(!1),q(!0)})),l(!0)}),[s]);var V=function(){var e=Object(xe.a)(fe.a.mark((function e(t){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t){e.next=5;break}return h(!0),e.next=4,fetch("/api/user",{method:"PUT",headers:{Authorization:sessionStorage.getItem("token"),"Content-Type":"application/json"},body:JSON.stringify({userId:I.userId,name:t.name,email:t.email})}).then((function(e){switch(e.status){case 200:L("Usu\xe1rio editado com sucesso!"),z(!0),q(!0);break;case 403:a.push("/login");break;case 409:z(!1),J("O email j\xe1 existe! Por favor, escolha outro!"),q(!0);break;default:z(!1),J("Erro inesperado do servidor: "+e.status),q(!0)}}),(function(e){z(!1),J(e.message),q(!0)}));case 4:h(!1);case 5:l(!1),S(Object(o.a)(Object(o.a)({},y),{},{editDialog:!1}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(xe.a)(fe.a.mark((function e(t){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t&&""===t){e.next=4;break}return x(!0),e.next=4,fetch("/api/user/delete",{method:"DELETE",headers:{Authorization:sessionStorage.getItem("token"),Password:t}}).then((function(e){switch(e.status){case 204:z(!0),L("Conta deletada com sucesso!"),q(!0),sessionStorage.removeItem("token"),sessionStorage.removeItem("loggedUsername"),a.push("/login");break;case 403:a.push("/login"),z(!1),J("Dele\xe7\xe3o n\xe3o autorizada"),q(!0);break;default:z(!1),J("Erro ao deletar: "+e.status),q(!0)}}),(function(e){z(!1),J(e.msg),q(!0)}));case 4:x(!1),S(Object(o.a)(Object(o.a)({},y),{},{deleteDialog:!1}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsxs)(M.a,{container:!0,spacing:3,direction:"column",alignItems:"stretch",children:[Object(n.jsxs)(M.a,{container:!0,item:!0,direction:"column",alignItems:"center",children:[Object(n.jsx)(ge.a,{className:t.logo}),Object(n.jsx)(b.a,{variant:"h6",children:I.username})]}),Object(n.jsxs)(M.a,{item:!0,children:[Object(n.jsx)(b.a,{variant:"subtitle1",children:"Meus dados"}),Object(n.jsx)(k.a,{}),Object(n.jsxs)(M.a,{direction:"column",container:!0,item:!0,children:[Object(n.jsx)(M.a,{container:!0,direction:"row",children:Object(n.jsx)(de.a,{fullWidth:!0,disabled:!0,variant:"outlined",margin:"normal",label:"Nome",value:I.name})}),Object(n.jsx)(M.a,{container:!0,direction:"row",children:Object(n.jsx)(de.a,{fullWidth:!0,disabled:!0,variant:"outlined",margin:"normal",label:"E-mail",value:I.email})})]}),m&&Object(n.jsx)(ve.a,{}),Object(n.jsx)(_.a,{disabled:m,fullWidth:!0,className:t.editButton,onClick:function(){S(Object(o.a)(Object(o.a)({},y),{},{editDialog:!0}))},variant:"contained",color:"primary",children:"Editar Dados"}),Object(n.jsx)(ke,{onClose:V,open:y.editDialog,user:I})]}),Object(n.jsxs)(M.a,{item:!0,children:[Object(n.jsx)(k.a,{}),f&&Object(n.jsx)(ve.a,{}),Object(n.jsx)(_.a,{disabled:f,fullWidth:!0,className:t.deleteButton,variant:"contained",color:"error",onClick:function(){S(Object(o.a)(Object(o.a)({},y),{},{deleteDialog:!0}))},children:"Apagar Conta"}),Object(n.jsx)(ye,{onClose:$,open:y.deleteDialog})]}),Object(n.jsx)(ne.a,{open:T,autoHideDuration:5e3,onClose:function(){return q(!1)},children:U?Object(n.jsx)(ee,{severity:"success",children:R}):Object(n.jsx)(ee,{severity:"error",children:H})})]})}var De=240,Ee=Object(j.a)((function(e){return{root:{display:"flex"},menuButton:{marginRight:e.spacing(2)},hide:{display:"none"},title:{flexGrow:1},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(De,"px)"),marginLeft:De,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},drawer:{width:De,flexShrink:0},drawerHeader:Object(o.a)(Object(o.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-end"}),drawerPaper:{width:De},content:{flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0}}}));function Ne(){var e=Ee(),t=Object(K.g)(),a=Object(r.useState)("Minha Escala"),i=Object(u.a)(a,2),c=i[0],s=i[1],o=Object(K.i)(),l=Object(r.useState)(!1),j=Object(u.a)(l,2),h=j[0],g=j[1],z=Object(r.useState)(null),A=Object(u.a)(z,2),B=A[0],M=A[1],R=Object(r.useState)(!1),L=Object(u.a)(R,2),G=L[0],H=L[1],J=Object(r.useState)([]),V=Object(u.a)(J,2),_=V[0],$=V[1],Z=function(e){s(e)},X=function(){fetch("/api/shift",{method:"GET",headers:{Authorization:sessionStorage.getItem("token")}}).then((function(e){return 403===e.status?(t.push("/login"),new Error("User not logged")):e.ok?e:void 0})).then((function(e){return e.json()})).then((function(e){var t=e._embedded;$(void 0===t?[]:t.shiftList),H(!0)}),(function(e){H(!0),$([])}))};Object(r.useEffect)((function(){X(),H(!0)}),[G]);var Y=function(e){return function(t){("keydown"!==t.type||"Tab"!==t.key&&"Shift"!==t.key)&&g(e)}},ee=function(){M(null)};return Object(n.jsxs)("div",{className:"root",children:[Object(n.jsx)(m.a,{position:"absolute",className:Object(d.a)(e.appBar,h&&e.appBarShift),children:Object(n.jsxs)(p.a,{children:[Object(n.jsx)(f.a,{edge:"start",color:"inherit","aria-label":"open menu",onClick:Y(!0),className:Object(d.a)(e.menuButton,h&&e.hide),children:Object(n.jsx)(O.a,{})}),Object(n.jsx)(b.a,{variant:"h6",className:e.title,children:c}),Object(n.jsx)(f.a,{color:"inherit",children:Object(n.jsx)(x.a,{badgeContent:0,color:"secondary",children:Object(n.jsx)(v.a,{})})}),Object(n.jsx)(f.a,{color:"inherit",onClick:function(e){M(e.currentTarget)},children:Object(n.jsx)(N.a,{id:"account-circle"})}),Object(n.jsxs)(S.a,{id:"menu-account",anchorEl:B,keepMounted:!0,open:Boolean(B),onClose:ee,children:[Object(n.jsx)(w.a,{disabled:!0,children:sessionStorage.getItem("loggedUsername")}),Object(n.jsx)(k.a,{}),Object(n.jsx)(w.a,{onClick:function(){t.push("/home/account")},children:"Minha Conta"}),Object(n.jsx)(w.a,{onClick:function(){sessionStorage.removeItem("token"),sessionStorage.removeItem("loggedUsername"),t.push("/login"),ee()},children:"Logout"})]})]})}),Object(n.jsxs)(y.a,{variant:"temporary",anchor:"left",open:h,className:e.drawer,classes:{paper:e.drawerPaper},onKeyDown:Y(!1),onClick:Y(!1),children:[Object(n.jsx)("div",{className:e.drawerHeader,children:Object(n.jsx)(f.a,{onClick:Y(!1),children:Object(n.jsx)(T.a,{})})}),Object(n.jsx)(k.a,{}),Object(n.jsxs)(C.a,{onClick:Y(!1),children:[Object(n.jsxs)(I.a,{button:!0,component:F.b,to:"".concat(o.url,"/calendar"),children:[Object(n.jsx)(D.a,{children:Object(n.jsx)(q.a,{})}),Object(n.jsx)(E.a,{primary:"Calend\xe1rio"})]},"calendar"),Object(n.jsxs)(I.a,{button:!0,component:F.b,to:"".concat(o.url,"/shifts"),children:[Object(n.jsx)(D.a,{children:Object(n.jsx)(P.a,{})}),Object(n.jsx)(E.a,{primary:"Escalas"})]},"shifts"),Object(n.jsxs)(I.a,{button:!0,component:F.b,to:"".concat(o.url,"/events"),children:[Object(n.jsx)(D.a,{children:Object(n.jsx)(W.a,{})}),Object(n.jsx)(E.a,{primary:"Eventos"})]},"events"),Object(n.jsxs)(I.a,{button:!0,component:F.b,to:"".concat(o.url,"/friends"),children:[Object(n.jsx)(D.a,{children:Object(n.jsx)(U.a,{})}),Object(n.jsx)(E.a,{primary:"Amigos"})]},"friends")]})]}),Object(n.jsx)("div",{className:e.drawerHeader}),Object(n.jsx)("main",{className:e.content,children:Object(n.jsxs)(K.d,{children:[Object(n.jsx)(K.b,{path:"".concat(o.path,"/calendar"),children:Object(n.jsx)(Q,{shifts:_,changeTitle:Z})}),Object(n.jsx)(K.b,{path:"".concat(o.path,"/shifts"),children:Object(n.jsx)(ce,{shifts:_,fetchShifts:X,changeTitle:Z})}),Object(n.jsx)(K.b,{path:"".concat(o.path,"/events")}),Object(n.jsx)(K.b,{path:"".concat(o.path,"/friends"),children:Object(n.jsx)(Oe,{changeTitle:Z})}),Object(n.jsx)(K.b,{exact:!0,path:o.path,children:Object(n.jsx)(K.a,{to:"".concat(o.path,"/calendar")})}),Object(n.jsx)(K.b,{exact:!0,path:"".concat(o.path,"/account"),children:Object(n.jsx)(Ie,{changeTitle:Z})})]})})]})}var Te=a(397),qe=a(398),Pe=a.p+"static/media/logo.2d757cfc.svg",We=a(399),Ue=a(108),ze=a(176),Ae=Object(j.a)((function(e){return{paper:{marginTop:e.spacing(6),marginBottom:e.spacing(3),display:"flex",flexDirection:"column",alignItems:"center"},social:{marginBottom:e.spacing(6),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},logo:{width:e.spacing(14),height:e.spacing(14),margin:e.spacing(1)},fb_button:{marginTop:e.spacing(2),color:"white",backgroundColor:Ue.a[900],textTransform:"none",fontSize:18},ig_button:{marginTop:e.spacing(2),color:"white",textTransform:"none",backgroundColor:"purple",fontSize:18}}}));function Be(){var e=Ae(),t=Object(K.g)(),a=Object(r.useState)({username:"",password:""}),i=Object(u.a)(a,2),c=i[0],s=i[1],l=Object(r.useState)(!1),d=Object(u.a)(l,2),j=d[0],m=d[1],h=Object(r.useState)(""),O=Object(u.a)(h,2),p=O[0],f=O[1],x=Object(r.useState)(!1),g=Object(u.a)(x,2),v=g[0],y=g[1],S=Object(r.useState)(!1),w=Object(u.a)(S,2),C=w[0],I=w[1],D=function(){var e=Object(xe.a)(fe.a.mark((function e(){var a;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/login",a={method:"POST",mode:"no-cors",body:JSON.stringify({username:c.username,password:c.password})},e.next=4,fetch("/login",a).then((function(e){switch(e.status){case 200:var a=e.headers.get("Authorization").replace("Bearer ",""),n=Object(ze.a)(a).sub;sessionStorage.setItem("token",e.headers.get("Authorization")),sessionStorage.setItem("loggedUsername",n),y(!0),I(!0),setTimeout((function(){t.push("/home")}),500);break;case 403:case 401:y(!1),f("Usu\xe1rio ou senha incorretos!"),I(!0);break;case 500:y(!1),f("Algo deu errado em nosso servidor!"),I(!0);break;default:y(!1),f("Erro inesperado do servidor: "+e.status),I(!0)}}),(function(e){f(e),I(!0)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(e){var t=e.target.name,a=e.target.value;s(Object(o.a)(Object(o.a)({},c),{},Object(se.a)({},t,a)))},N=function(){var e=Object(xe.a)(fe.a.mark((function e(t){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),m(!0),e.next=4,D();case 4:m(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return null!==sessionStorage.getItem("token")&&t.push("/home"),Object(n.jsxs)(Te.a,{component:"main",maxWidth:"xs",children:[Object(n.jsxs)("div",{className:e.paper,children:[Object(n.jsx)(ge.a,{className:e.logo,src:Pe}),Object(n.jsx)(b.a,{variant:"h3",children:"Agenda Mar\xedtima"}),Object(n.jsxs)("form",{onSubmit:N,className:e.form,noValidate:!0,children:[Object(n.jsx)(de.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Nome de Usu\xe1rio ou Email",name:"username",autoFocus:!0,autoComplete:"email",value:c.username,onChange:E}),Object(n.jsx)(de.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Senha",name:"password",type:"password",autoComplete:"current-password",value:c.password,onChange:E}),j&&Object(n.jsx)(ve.a,{}),Object(n.jsx)(_.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",disabled:j,className:e.submit,children:"Entrar"}),Object(n.jsxs)(M.a,{container:!0,children:[Object(n.jsx)(M.a,{item:!0,xs:!0,children:Object(n.jsx)(qe.a,{href:"#",variant:"body2",onClick:function(){t.push("/recovery")},children:"Esqueceu sua senha?"})}),Object(n.jsx)(M.a,{item:!0,children:Object(n.jsx)(qe.a,{href:"#",variant:"body2",onClick:function(){t.push("/signup")},children:"N\xe3o tem uma conta? Cadastre-se!"})})]})]}),Object(n.jsx)(ne.a,{open:C,autoHideDuration:5e3,onClose:function(){return I(!1)},children:v?Object(n.jsx)(ee,{severity:"success",children:"Login com sucesso!"}):Object(n.jsx)(ee,{severity:"error",children:p})})]}),Object(n.jsx)(k.a,{}),Object(n.jsx)("div",{className:e.social,children:Object(n.jsx)(_.a,{className:e.fb_button,fullWidth:!0,variant:"contained",startIcon:Object(n.jsx)(We.a,{}),href:"oauth2/authorization/facebook",children:"Continue com Facebook"})})]})}var Me=a(42),Re=Object(j.a)((function(e){return{paper:{marginTop:e.spacing(6),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},logo:{width:e.spacing(14),height:e.spacing(14),margin:e.spacing(1)}}}));function Le(){var e=Re(),t=Object(K.g)(),a=Object(K.h)(),i=new URLSearchParams(a.search),c=i.get("name"),s=i.get("email"),o=i.get("socialId"),l=i.get("registrationId"),d=Object(r.useState)("Erro cr\xedtico!"),j=Object(u.a)(d,2),m=j[0],h=j[1],O=Object(r.useState)(!1),p=Object(u.a)(O,2),f=p[0],x=p[1],g=Object(r.useState)(!1),v=Object(u.a)(g,2),y=v[0],S=v[1],w=function(){var e=Object(xe.a)(fe.a.mark((function e(a){var n;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/user/socialSignup",n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a.name,email:a.email,username:a.username,socialId:o,registrationId:l})},e.next=4,fetch("/api/user/socialSignup",n).then((function(e){switch(e.status){case 201:sessionStorage.setItem("token",e.headers.get("Authorization")),sessionStorage.setItem("loggedUsername",a.username),x(!0),h("Usu\xe1rio criado com sucesso! Redirecionando..."),S(!0),setTimeout((function(){t.push("/")}),2e3);break;case 400:x(!1),h("Dados da solicita\xe7\xe3o est\xe3o incorretos! Por favor, verifique-os e tente novamente!"),S(!0);break;case 409:x(!1),h("O usu\xe1rio ou e-mail j\xe1 existem! Por favor, escolha outro!"),S(!0);break;case 500:x(!1),h("Erro inesperado do servidor - 500"),S(!0);break;default:x(!1),h("Erro inesperado: "+e.status),S(!0)}}),(function(e){x(!1),h(e.message)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)(Te.a,{component:"main",maxWidth:"xs",children:Object(n.jsxs)("div",{className:e.paper,children:[Object(n.jsx)(ge.a,{className:e.logo,src:Pe}),Object(n.jsx)(b.a,{variant:"h4",children:"Cadastrar novo usu\xe1rio"}),Object(n.jsx)(Se.c,{initialValues:{name:c,email:s},validationSchema:we.a({name:we.c().max(60,"Deve ter 60 caracteres ou menos").matches(/^([^0-9{}\\/()\]\[]*)$/,"Nome inv\xe1lido").required("Obrigat\xf3rio"),username:we.c().min(6,"M\xednimo de 6 letras").max(30,"M\xe1ximo de 30 letras").required("Obrigat\xf3rio"),email:we.c().email("E-mail inv\xe1lido").required("Obrigat\xf3rio")}),onSubmit:function(){var e=Object(xe.a)(fe.a.mark((function e(t,a){var n;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.setSubmitting,e.next=3,w(t);case 3:n(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),children:function(t){t.submitForm;var a=t.isSubmitting;return Object(n.jsxs)(Se.b,{className:e.form,children:[Object(n.jsx)(Se.a,{autoFocus:!0,fullWidth:!0,required:!0,margin:"normal",variant:"outlined",component:Me.a,name:"name",type:"text",label:"Nome e Sobrenome"}),Object(n.jsx)(Se.a,{fullWidth:!0,required:!0,margin:"normal",variant:"outlined",component:Me.a,name:"email",type:"email",label:"Endere\xe7o de e-mail"}),Object(n.jsx)(Se.a,{fullWidth:!0,required:!0,margin:"normal",variant:"outlined",component:Me.a,name:"username",type:"text",label:"Nome de Usu\xe1rio"}),a&&Object(n.jsx)(ve.a,{}),Object(n.jsx)(_.a,{className:e.submit,fullWidth:!0,variant:"contained",color:"primary",disabled:a,type:"submit",children:"Cadastrar"})]})}}),Object(n.jsx)(M.a,{container:!0,children:Object(n.jsx)(M.a,{item:!0,xs:!0,children:Object(n.jsx)(F.b,{href:"#",variant:"body2",onClick:function(){t.push("/login")},children:"Voltar para Login"})})}),Object(n.jsx)(ne.a,{open:y,autoHideDuration:5e3,onClose:function(){return S(!1)},children:f?Object(n.jsx)(ee,{severity:"success",children:m}):Object(n.jsx)(ee,{severity:"error",children:m})})]})})}var Fe=Object(j.a)((function(e){return{paper:{marginTop:e.spacing(6),marginBottom:e.spacing(3),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},logo:{width:e.spacing(14),height:e.spacing(14),margin:e.spacing(1)}}}));function Ge(){var e=Fe(),t=Object(K.g)(),a=Object(r.useState)("Erro cr\xedtico!"),i=Object(u.a)(a,2),c=i[0],s=i[1],o=Object(r.useState)(!1),l=Object(u.a)(o,2),d=l[0],j=l[1],m=Object(r.useState)(!1),h=Object(u.a)(m,2),O=h[0],p=h[1],f=function(){var e=Object(xe.a)(fe.a.mark((function e(a){var n;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/user/signup",n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a.name,email:a.email,username:a.username,password:a.password,confirmPassword:a.confirmPassword})},e.next=4,fetch("/api/user/signup",n).then((function(e){switch(e.status){case 201:j(!0),s("Usu\xe1rio criado com sucesso! Redirecionando para login..."),p(!0),setTimeout((function(){t.push("/login")}),2e3);break;case 400:j(!1),s("Dados da solicita\xe7\xe3o est\xe3o incorretos! Por favor, verifique-os e tente novamente!"),p(!0);break;case 409:j(!1),s("O usu\xe1rio ou e-mail j\xe1 existem! Por favor, escolha outro!"),p(!0);break;case 500:j(!1),s("Erro inesperado do servidor! - 500"),p(!0);break;default:j(!1),s("Erro inesperado: "+e.status),p(!0)}}),(function(e){j(!1),s(e.message)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)(Te.a,{component:"main",maxWidth:"xs",children:Object(n.jsxs)("div",{className:e.paper,children:[Object(n.jsx)(ge.a,{className:e.logo,src:Pe}),Object(n.jsx)(b.a,{variant:"h4",children:"Cadastrar novo usu\xe1rio"}),Object(n.jsx)(Se.c,{initialValues:{},validationSchema:we.a({name:we.c().max(60,"Deve ter 60 caracteres ou menos").matches(/^([^0-9{}\\/()\]\[]*)$/,"Nome inv\xe1lido").required("Obrigat\xf3rio"),username:we.c().min(6,"M\xednimo de 6 letras").max(30,"M\xe1ximo de 30 letras").required("Obrigat\xf3rio"),email:we.c().email("E-mail inv\xe1lido").required("Obrigat\xf3rio"),password:we.c().min(8,"M\xednimo de 8 caracteres").max(64,"M\xe1ximo de 64 caracteres").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[*.!@$%#^&(){}\[\]:;<>,.?~+-/|/=/\\]).*$/,"Senha deve ter mai\xfasculas, min\xfasculas, n\xfameros e caracteres especiais").required("Obrigat\xf3rio"),confirmPassword:we.c().oneOf([we.b("password"),null],"Senha e confirma\xe7\xe3o n\xe3o s\xe3o iguais").required("Obrigat\xf3rio")}),onSubmit:function(){var e=Object(xe.a)(fe.a.mark((function e(t,a){var n;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.setSubmitting,e.next=3,f(t);case 3:n(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),children:function(t){t.submitForm;var a=t.isSubmitting;return Object(n.jsxs)(Se.b,{className:e.form,children:[Object(n.jsx)(Se.a,{autoFocus:!0,fullWidth:!0,required:!0,margin:"normal",variant:"outlined",component:Me.a,name:"name",type:"text",label:"Nome e Sobrenome"}),Object(n.jsx)(Se.a,{fullWidth:!0,required:!0,margin:"normal",variant:"outlined",component:Me.a,name:"email",type:"email",label:"Endere\xe7o de e-mail"}),Object(n.jsx)(Se.a,{fullWidth:!0,required:!0,margin:"normal",variant:"outlined",component:Me.a,name:"username",type:"text",label:"Nome de Usu\xe1rio"}),Object(n.jsx)(Se.a,{fullWidth:!0,required:!0,margin:"normal",variant:"outlined",component:Me.a,name:"password",type:"password",label:"Senha"}),Object(n.jsx)(Se.a,{fullWidth:!0,required:!0,margin:"normal",variant:"outlined",component:Me.a,name:"confirmPassword",type:"password",label:"Confirme sua senha"}),a&&Object(n.jsx)(ve.a,{}),Object(n.jsx)(_.a,{className:e.submit,fullWidth:!0,variant:"contained",color:"primary",disabled:a,type:"submit",children:"Cadastrar"})]})}}),Object(n.jsx)(M.a,{container:!0,children:Object(n.jsx)(M.a,{item:!0,xs:!0,children:Object(n.jsx)(F.b,{href:"#",variant:"body2",onClick:function(){t.push("/login")},children:"Voltar para Login"})})}),Object(n.jsx)(ne.a,{open:O,autoHideDuration:5e3,onClose:function(){return p(!1)},children:d?Object(n.jsx)(ee,{severity:"success",children:c}):Object(n.jsx)(ee,{severity:"error",children:c})})]})})}var He=a(401),Je=a(400),Ve=a(327),_e=a(332),Ke=a(330),$e=a(328),Ze=a(402),Qe=a(403),Xe=a(39),Ye=a(406),et=a(178),tt=a(91),at=a(177),nt=Object(j.a)((function(e){return{menuButton:{marginRight:e.spacing(2)},hide:{display:"none"},title:{flexGrow:1},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},header:Object(o.a)(Object(o.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-end"}),form:{marginTop:e.spacing(1)},formItems:{padding:e.spacing(1)}}}));function rt(e){var t=nt(),a=Object(K.g)(),i=Object(r.useState)(!1),c=Object(u.a)(i,2),s=c[0],o=c[1],l=Object(r.useState)(""),d=Object(u.a)(l,2),j=d[0],h=d[1],O=Object(r.useState)(!1),x=Object(u.a)(O,2),g=x[0],v=x[1],y=Object(r.useState)(new Date),S=Object(u.a)(y,2),k=S[0],C=S[1],I=Object(r.useState)(new Date),D=Object(u.a)(I,2),E=D[0],N=D[1],T=Object(r.useState)(new Date),q=Object(u.a)(T,2),P=q[0],W=q[1],U=Object(r.useState)(new Date),z=Object(u.a)(U,2),A=z[0],B=z[1],R=Object(r.useState)(0),L=Object(u.a)(R,2),F=L[0],G=L[1],H=Object(r.useState)(!1),J=Object(u.a)(H,2),V=J[0],$=J[1],Z=Object(r.useState)(0),Q=Object(u.a)(Z,2),X=Q[0],Y=Q[1],te=function(e){return Object(tt.a)(E,e)},ae=function(){};return Object(n.jsxs)(Te.a,{component:"main",children:[Object(n.jsx)("div",{children:Object(n.jsx)(m.a,{className:t.appBar,position:"absolute",children:Object(n.jsxs)(p.a,{children:[Object(n.jsx)(f.a,{className:t.menuButton,edge:"start",color:"inherit","aria-label":"go back",onClick:a.goBack,children:Object(n.jsx)(Ze.a,{})}),Object(n.jsx)(b.a,{variant:"h6",className:t.title,children:"Escala"}),Object(n.jsx)(_.a,{variant:"contained",startIcon:Object(n.jsx)(Qe.a,{}),onClick:function(e){e.preventDefault(),ae(),fetch("/api/shift/add",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:sessionStorage.getItem("token")},body:JSON.stringify({unavailabilityStartDate:k,boardingDate:E,leavingDate:P,unavailabilityEndDate:A,cycleDays:F,repeat:X})}).then((function(e){if(!e.ok)throw 403===e.status?(a.push("/login"),new Error("Usu\xe1rio n\xe3o logado!")):e;v(!0),o(!0),setTimeout((function(){a.push("/home")}),2e3)})).catch((function(e){h(e.message),o(!0)}))},children:"Salvar"})]})})}),Object(n.jsx)("div",{className:t.header}),Object(n.jsxs)(M.a,{container:!0,direction:"column",justify:"center",className:t.form,children:[Object(n.jsxs)(Xe.a,{utils:et.a,children:[Object(n.jsx)(Ye.a,{className:t.formItems,margin:"normal",id:"date-unavailable",label:"Indispon\xedvel a partir de",format:"dd/MM/yyyy",value:k,onChange:C,KeyboardButtonProps:{"aria-label":"change date"}}),Object(n.jsx)(Ye.a,{className:t.formItems,margin:"normal",id:"date-boarding",label:"Data de embarque",format:"dd/MM/yyyy",value:E,onChange:N,KeyboardButtonProps:{"aria-label":"change date"}}),Object(n.jsx)(Ye.a,{className:t.formItems,disabled:V,margin:"normal",id:"date-leaving",label:"Data de desembarque",format:"dd/MM/yyyy",value:P,onChange:function(e){W(e),V||G(Object(at.a)(e,E))},KeyboardButtonProps:{"aria-label":"change date"}}),Object(n.jsx)(Ye.a,{className:t.formItems,disabled:V,margin:"normal",id:"date-available",label:"Disponivel a partir de:",format:"dd/MM/yyyy",value:A,onChange:B,KeyboardButtonProps:{"aria-label":"change date"}})]}),Object(n.jsxs)(M.a,{container:!0,direction:"row",className:t.formItems,children:[Object(n.jsx)(He.a,{control:Object(n.jsx)(Je.a,{checked:V,onChange:function(e){var t=e.target.checked;$(t)},name:"checked cycle",color:"primary"})}),Object(n.jsx)(de.a,{disabled:!V,id:"cycle-days",label:"N\xba de dias embarcado",type:"number",InputLabelProps:{shrink:!0},value:F,onChange:function(e){var t=e.target.value;t<0&&(t=0),G(t);var a=te(t);W(a),B(a)}})]}),Object(n.jsxs)(Ve.a,{className:t.formItems,children:[Object(n.jsx)(_e.a,{id:"repeat-cycle-label",className:t.formItems,children:"Repetir"}),Object(n.jsxs)(Ke.a,{labelId:"repeat-cycle-label",id:"repeat-cycle-select",value:X,onChange:function(e){Y(e.target.value)},children:[Object(n.jsx)(w.a,{value:0,children:"N\xe3o"}),Object(n.jsx)(w.a,{value:1,children:"1x"}),Object(n.jsx)(w.a,{value:2,children:"2x"}),Object(n.jsx)(w.a,{value:3,children:"3x"}),Object(n.jsx)(w.a,{value:4,children:"4x"}),Object(n.jsx)(w.a,{value:5,children:"5x"}),Object(n.jsx)(w.a,{value:6,children:"6x"}),Object(n.jsx)(w.a,{value:7,children:"7x"}),Object(n.jsx)(w.a,{value:8,children:"8x"}),Object(n.jsx)(w.a,{value:9,children:"9x"}),Object(n.jsx)(w.a,{value:10,children:"10x"}),Object(n.jsx)(w.a,{value:11,children:"11x"}),Object(n.jsx)(w.a,{value:12,children:"12x"})]}),Object(n.jsx)($e.a,{children:"Selecione por quantas vezes repetir a escala"})]})]}),Object(n.jsx)(ne.a,{open:s,autoHideDuration:3e3,onClose:function(){o(!1),g&&a.goBack()},children:g?Object(n.jsx)(ee,{severity:"success",children:"Escala(s) salva!"}):Object(n.jsx)(ee,{severity:"error",children:j})})]})}var it=Object(j.a)((function(e){return{paper:{marginTop:e.spacing(8),maxWidth:500,alignContent:"center"},header:{marginBottom:e.spacing(3)},submit:{marginTop:e.spacing(1)},footer:{marginTop:e.spacing(2)}}}));function ct(){var e=it(),t=Object(K.g)(),a=Object(r.useState)(""),i=Object(u.a)(a,2),c=i[0],s=i[1],o=Object(r.useState)(!1),l=Object(u.a)(o,2),d=l[0],j=l[1],m=Object(r.useState)({title:"Ops...",message:"N\xe3o foi poss\xedvel enviar a recupera\xe7\xe3o! Por favor, recarregue a p\xe1gina e tente novamente"}),h=Object(u.a)(m,2),O=h[0],p=h[1],f=function(){var e=Object(xe.a)(fe.a.mark((function e(){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/user/recover?user="+c,{method:"POST"}).then((function(e){e.ok&&p({title:"Recupera\xe7\xe3o em andamento!",message:"Um e-mail com instru\xe7\xf5es para troca de senha foi enviado para o e-mail de recupera\xe7\xe3o de sua conta. Por favor, cheque sua caixa de e-mail e siga o link fornecido para continuar o procedimento."})}),(function(e){}));case 2:j(!0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsx)(Te.a,{className:e.paper,children:Object(n.jsxs)(M.a,{container:!0,direction:"column",children:[Object(n.jsx)(M.a,{item:!0,xs:!0,className:e.header,children:Object(n.jsx)(b.a,{variant:"h5",children:"Recupera\xe7\xe3o de conta"})}),Object(n.jsxs)(M.a,{item:!0,children:[Object(n.jsx)(b.a,{children:"Digite seu nome de usu\xe1rio para recupera\xe7\xe3o de conta:"}),Object(n.jsx)(de.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"forgot-input",label:"Nome de usu\xe1rio para recupera\xe7\xe3o",name:"username",autoComplete:"username",autoFocus:!0,value:c,onChange:function(e){s(e.target.value)}}),Object(n.jsx)(_.a,{className:e.submit,variant:"contained",color:"primary",onClick:f,fullWidth:!0,children:"Enviar"})]}),Object(n.jsx)(M.a,{item:!0,xs:!0,className:e.footer,children:Object(n.jsx)(qe.a,{href:"#",variant:"body2",onClick:function(){t.push("/login")},children:"Retornar para Login"})}),Object(n.jsxs)(G.a,{open:d,fullWidth:!0,children:[Object(n.jsx)(H.a,{children:O.title}),Object(n.jsx)(J.a,{children:Object(n.jsx)(ue.a,{children:O.message})}),Object(n.jsx)(V.a,{children:Object(n.jsx)(_.a,{onClick:function(){j(!1)},children:"OK"})})]})]})})}var st=Object(j.a)((function(e){return{paper:{marginTop:e.spacing(6),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(1)},header:{marginBottom:e.spacing(2)},submit:{margin:e.spacing(3,0,2)},footer:{marginTop:e.spacing(2)}}}));function ot(){var e=st(),t=Object(K.h)(),a=Object(K.g)(),i=new URLSearchParams(t.search).get("reset"),c=Object(r.useState)({username:"",password:"",confirm:""}),s=Object(u.a)(c,2),l=s[0],d=s[1],j=Object(r.useState)(!1),m=Object(u.a)(j,2),h=m[0],O=m[1],p=Object(r.useState)(!1),f=Object(u.a)(p,2),x=f[0],g=f[1],v=Object(r.useState)({title:"Ops...",message:"Um erro aconteceu! Contate-nos para mais informa\xe7\xf5es!"}),y=Object(u.a)(v,2),S=y[0],w=y[1],k=function(){var e=Object(xe.a)(fe.a.mark((function e(){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/user/resetPassword",{method:"POST",headers:{reset:i,"Content-Type":"application/json"},body:JSON.stringify({username:l.username,password:l.password,confirmPassword:l.confirm})}).then((function(e){switch(e.status){case 200:w({title:"Sucesso!",message:"Sua senha foi redefinida. Por favor, efetue o login normalmente!"}),g(!0),O(!0);break;case 403:a.push("/login");break;case 400:g(!0);break;default:w(Object(o.a)(Object(o.a)({},S),{},{message:"Algo deu errado em sua solicita\xe7\xe3o! Por favor, atualize a p\xe1gina e tente novamente!"})),g(!0)}}),(function(e){w(Object(o.a)(Object(o.a)({},S),{},{message:"Algo deu errado em nosso servidor! Por favor, atualize a p\xe1gina e tente novamente!"})),g(!0)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return null===i&&a.push("/login"),Object(n.jsx)(Te.a,{component:"main",maxWidth:"xs",children:Object(n.jsxs)("div",{className:e.paper,children:[Object(n.jsx)(b.a,{variant:"h4",children:"Recupera\xe7\xe3o de senha"}),Object(n.jsx)(Se.c,{initialValues:{},validationSchema:we.a({username:we.c().required("Obrigat\xf3rio"),password:we.c().min(8,"M\xednimo de 8 caracteres").max(64,"M\xe1ximo de 64 caracteres").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[*.!@$%#^&(){}\[\]:;<>,.?~+-/|/=/\\]).*$/,"Senha deve ter mai\xfasculas, min\xfasculas, n\xfameros e caracteres especiais").required("Obrigat\xf3rio"),confirm:we.c().oneOf([we.b("password"),null],"Senha e confirma\xe7\xe3o n\xe3o s\xe3o iguais").required("Obrigat\xf3rio")}),onSubmit:function(){var e=Object(xe.a)(fe.a.mark((function e(t,a){var n;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.setSubmitting,d(t),e.next=4,k();case 4:n(!1);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),children:function(t){t.submitForm;var a=t.isSubmitting;return Object(n.jsxs)(Se.b,{className:e.form,children:[Object(n.jsx)(Se.a,{fullWidth:!0,required:!0,margin:"normal",variant:"outlined",component:Me.a,name:"username",type:"text",label:"Nome de Usu\xe1rio"}),Object(n.jsx)(Se.a,{fullWidth:!0,required:!0,margin:"normal",variant:"outlined",component:Me.a,name:"password",type:"password",label:"Senha"}),Object(n.jsx)(Se.a,{fullWidth:!0,required:!0,margin:"normal",variant:"outlined",component:Me.a,name:"confirm",type:"password",label:"Confirme sua senha"}),a&&Object(n.jsx)(ve.a,{}),Object(n.jsx)(_.a,{className:e.submit,fullWidth:!0,variant:"contained",color:"primary",disabled:a,type:"submit",children:"Enviar"})]})}}),Object(n.jsxs)(G.a,{open:x,fullWidth:!0,children:[Object(n.jsx)(H.a,{children:S.title}),Object(n.jsx)(J.a,{children:Object(n.jsx)(ue.a,{children:S.message})}),Object(n.jsx)(V.a,{children:Object(n.jsx)(_.a,{onClick:function(){h&&a.push("/login"),g(!1)},children:"OK"})})]})]})})}var lt=a(179),ut=a(404),dt=a(405);function jt(){var e=Object(K.h)(),t=Object(K.g)(),a=new URLSearchParams(e.search),n=a.get("token"),r=a.get("user");return sessionStorage.setItem("token","Bearer "+n),sessionStorage.setItem("loggedUsername",r),t.push("/"),null}var bt=Object(lt.a)({palette:{common:{black:"#000",white:"#fff"},background:{paper:"rgba(235, 246, 249, 1)",default:"#fafafa"},primary:{light:"#7986cb",main:"rgba(2, 27, 154, 1)",dark:"#303f9f",contrastText:"#fff"},secondary:{light:"#ff4081",main:"rgba(182, 128, 2, 1)",dark:"#c51162",contrastText:"#fff"},error:{light:"#e57373",main:"#f44336",dark:"#d32f2f",contrastText:"#fff"},text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"}},typography:{button:{fontSize:"1rem",fontWeight:"500",letterSpacing:"0.02857em"}}});function mt(e){var t=e.children,a=Object(l.a)(e,["children"]),r=sessionStorage.getItem("token");return Object(n.jsx)(K.b,Object(o.a)(Object(o.a)({},a),{},{render:function(e){var a=e.location;return r?t:Object(n.jsx)(K.a,{to:{pathname:"/login",state:{from:a}}})}}))}function ht(){return Object(n.jsx)(i.a.Fragment,{children:Object(n.jsxs)(ut.a,{theme:bt,children:[Object(n.jsx)(dt.a,{}),Object(n.jsx)(F.a,{children:Object(n.jsxs)(K.d,{children:[Object(n.jsx)(mt,{exact:!0,path:"/",children:Object(n.jsx)(K.a,{to:"/home"})}),Object(n.jsx)(K.b,{exact:!0,path:"/login",children:Object(n.jsx)(Be,{})}),Object(n.jsx)(K.b,{exact:!0,path:"/signup",children:Object(n.jsx)(Ge,{})}),Object(n.jsx)(mt,{path:"/home",children:Object(n.jsx)(Ne,{})}),Object(n.jsx)(mt,{exact:!0,path:"/shift",children:Object(n.jsx)(rt,{})}),Object(n.jsx)(K.b,{exact:!0,path:"/recovery",children:Object(n.jsx)(ct,{})}),Object(n.jsx)(K.b,{exact:!0,path:"/changePassword",children:Object(n.jsx)(ot,{})}),Object(n.jsx)(K.b,{exact:!0,path:"/loginSuccess",children:Object(n.jsx)(jt,{})}),Object(n.jsx)(K.b,{exact:!0,path:"/socialSignup",children:Object(n.jsx)(Le,{})})]})})]})})}s.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(ht,{})}),document.getElementById("root"))}},[[320,1,2]]]);
//# sourceMappingURL=main.ebd7e633.chunk.js.map